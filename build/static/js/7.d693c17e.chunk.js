(this.webpackJsonpreact_admin_dashboard=this.webpackJsonpreact_admin_dashboard||[]).push([[7],{1287:function(e,t,a){"use strict";a.r(t);var n=a(8),l=a(45),r=a(0),c=a.n(r),s=a(39),o=a(9),u=a(43),i=a(16),m=a(86),E=["icon"];function d(e){var t=e.icon,a=Object(l.a)(e,E),n=t;return c.a.createElement(n,a)}t.default=function(){var e=Object(r.useState)(10),t=Object(n.a)(e,2),a=t[0],l=t[1],E=Object(r.useState)("\u0432\u0441\u0438\u0447\u043a\u0438"),f=Object(n.a)(E,2),p=f[0],b=f[1];return c.a.createElement("div",null,c.a.createElement(s.a,null,"\u041f\u043e\u0440\u044a\u0447\u043a\u0438"),c.a.createElement("div",{className:"flex text-gray-800 dark:text-gray-300"},c.a.createElement("div",{className:"flex items-center text-purple-600"},c.a.createElement(d,{className:"w-5 h-5","aria-hidden":"true",icon:u.HomeIcon}),c.a.createElement(o.c,{exact:!0,to:"/app/dashboard",className:"mx-2"},"\u041d\u0430\u0447\u0430\u043b\u043e")),">",c.a.createElement("p",{className:"mx-2"},"\u041f\u043e\u0440\u044a\u0447\u043a\u0438")),c.a.createElement(i.Card,{className:"mt-5 mb-5 shadow-md"},c.a.createElement(i.CardBody,null,c.a.createElement("div",{className:"flex items-center"},c.a.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"\u0424\u0438\u043b\u0442\u044a\u0440"),c.a.createElement(i.Label,{className:"mx-3"},c.a.createElement(i.Select,{className:"py-3",onChange:function(e){return"\u0412\u0441\u0438\u0447\u043a\u0438"==(t=e.target.value)&&b("\u0432\u0441\u0438\u0447\u043a\u0438"),"\u0421\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430"==t&&b("\u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430"),"\u0418\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435"==t&&b("\u0438\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435"),"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430"==t&&b("\u0438\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430"),void("\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430"==t&&b("\u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430"));var t}},c.a.createElement("option",null,"\u0412\u0441\u0438\u0447\u043a\u0438"),c.a.createElement("option",null,"\u0421\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430"),c.a.createElement("option",null,"\u0418\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435"),c.a.createElement("option",null,"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430"),c.a.createElement("option",null,"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430"))),c.a.createElement(i.Label,{className:""},c.a.createElement("div",{className:"relative text-gray-500 focus-within:text-purple-600 dark:focus-within:text-purple-400"},c.a.createElement("input",{className:"py-3 pr-5 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",value:a,onChange:function(e){return l(e.target.value)}}),c.a.createElement("div",{className:"absolute inset-y-0 right-0 flex items-center mr-3 pointer-events-none"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438")))))),c.a.createElement(m.a,{resultsPerPage:a,filter:p}))}},39:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(e){var t=e.children;return l.a.createElement("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200"},t)}},40:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={url:{API_BASE_URL:"https://orders-pi314-396621.uc.r.appspot.com"}}},42:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},44:function(e,t,a){"use strict";var n=a(45),l=a(0),r=a.n(l),c=["icon"];t.a=function(e){var t=e.icon,a=Object(n.a)(e,c),l=t;return r.a.createElement(l,a)}},49:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(42);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},86:function(e,t,a){"use strict";var n=a(42),l=a(49),r=a(50),c=a.n(r),s=a(53),o=a(8),u=a(0),i=a.n(u),m=a(1296),E=a(16),d=a(43),f=a(9),p=(a(72),a(73)),b=a(74),N=a.n(b),v=a(44),O=a(40);t.a=function(e){var t=e.resultsPerPage,a=e.filter,r=Object(u.useState)(1),b=Object(o.a)(r,2),g=b[0],h=b[1],x=Object(u.useState)([]),y=Object(o.a)(x,2),j=y[0],D=y[1],C=Object(u.useState)(0),w=Object(o.a)(C,2),S=w[0],T=w[1],k=localStorage.getItem("accessToken"),R=JSON.parse(localStorage.getItem("user")),A=Object(u.useState)(),P=Object(o.a)(A,2),_=P[0],I=P[1],B=Object(u.useState)(!1),F=Object(o.a)(B,2),W=F[0],G=F[1],K=Object(u.useState)(null),L=Object(o.a)(K,2),M=L[0],H=L[1],U=O.a.url.API_BASE_URL,J=Object(u.useState)([]),z=Object(o.a)(J,2),Y=z[0],q=z[1],Q=function(e){switch(e){case"WORKING_ON":return"text-yellow-500";case"CREATED":return"text-gray-500";case"SEND":return"text-blue-500";case"DONE":return"text-green-500"}};Object(u.useEffect)((function(){var e={};j.forEach((function(t){e[t.id]=!1})),q(e)}),[j]);var V=function(){var e=Object(s.a)(c.a.mark((function e(){var n,l,r,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Bearer ".concat(k)}},e.next=4,m.a.get(U+"/api/orders/all",n);case 4:l=e.sent,r=l.data,s=r,"\u0438\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430"===a?s=r.filter((function(e){return"SEND"===e.status})):"\u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430"===a?s=r.filter((function(e){return"CREATED"===e.status})):"\u0438\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435"===a?s=r.filter((function(e){return"WORKING_ON"===e.status})):"\u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430"===a&&(s=r.filter((function(e){return"DONE"===e.status}))),o=s.flatMap((function(e){return e})),T(o.length),D(o.slice((g-1)*t,g*t)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();function X(){G(!1)}var Z=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"")},$=function(){var e=Object(s.a)(c.a.mark((function e(){var t,a,n,l,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N.a.Workbook,a=t.addWorksheet("\u0421\u043f\u0440\u0430\u0432\u043a\u0430"),n=["\u041f\u041e\u0420\u0415\u0414\u0415\u041d \u041d\u041e\u041c\u0415\u0420","\u0413\u0440\u0443\u043f\u0430","\u0414\u0410\u0422\u0410","\u041f\u041e\u0420\u042a\u0427\u041a\u0410","\u041a\u041b\u0418\u0415\u041d\u0422","\u0412\u0418\u0414","\u0413\u0420\u0410\u0414","\u0415\u0422\u0418\u041a\u0415\u0422","\u041c\u041e\u0414\u0415\u041b","\u0412\u0418\u0421\u041e\u0427\u0418\u041d\u0410","\u0428\u0418\u0420\u0418\u041d\u0410","\u0411\u0420\u041e\u0419 \u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e","\u041c\u0415\u0420\u041d\u0410 \u0415\u0414\u0418\u041d\u0418\u0426\u0410","\u0414\u0420\u042a\u0416\u041a\u0410","\u0415\u0414\u0418\u041d\u0418\u0427\u041d\u0410 \u0426\u0415\u041d\u0410","\u0426\u0415\u041d\u0410 \u041d\u0410 \u0414\u0420\u042a\u0416\u041a\u0410","\u0414\u0412\u0423\u0421\u0422\u0420\u0410\u041d\u041d\u041e \u0424\u041e\u041b\u0418\u0420\u0410\u041d\u0415","\u0421\u0422\u041e\u0419\u041d\u041e\u0421\u0422","\u0424\u041e\u041b\u0418\u041e","\u041f\u0420\u041e\u0424\u0418\u041b"],a.addRow(n),j.forEach((function(e){e.groups.forEach((function(t){var n=[Z(e.createdAt)+e.id,"\u0413\u0440\u0443\u043f\u0430",e.createdAt,e.id,e.user.companyName,"BY_HAND"===e.type?"\u0420\u044a\u0447\u043d\u043e - \u043e\u0442 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440":"\u041e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442",e.user.city,e.detailType,t.model.name,t.height,t.width,t.number,"\u043a\u0432\u0430\u0434\u0440\u0430\u0442\u0435\u043d \u043c\u0435\u0442\u044a\u0440",t.handle.name,t.handle.price,"\u0426\u0435\u043d\u0430 \u043d\u0430 \u0414\u0440\u044a\u0436\u043a\u0430",t.bothSidesLaminated?"\u0414\u0412\u0423\u0421\u0422\u0420\u0410\u041d\u041d\u041e":"",e.totalPrice,t.folio.name,t.profil.name],l=a.addRow(n);"CREATED"===e.status?l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF00FF00"}}:"WORKING_ON"===e.status&&(l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"}})}))})),e.next=7,t.xlsx.writeBuffer();case 7:l=e.sent,r=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Object(p.saveAs)(r,"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 - "+(new Date).toLocaleDateString()+".xlsx");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){V()}),[g,t,a]),i.a.createElement("div",null,"[ADMIN]"===R.data.role&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"mt-4 "},i.a.createElement(E.Button,{layout:"outline",onClick:$,className:"btn btn-primary"},"\u0415\u043a\u0441\u043f\u043e\u0440\u0442 \u043d\u0430 \u0441\u043f\u0440\u0430\u0432\u043a\u0430")),i.a.createElement("hr",{className:"customeDivider mx-4 my-5"})),i.a.createElement(E.TableContainer,{className:"mb-8"},i.a.createElement(E.Table,null,i.a.createElement(E.TableHeader,null,i.a.createElement("tr",null,i.a.createElement(E.TableCell,null,"\u041d\u043e\u043c\u0435\u0440"),i.a.createElement(E.TableCell,null,"O\u0442 \u0434\u0430\u0442\u0430"),i.a.createElement(E.TableCell,null,"\u0421\u0442\u0430\u0442\u0443\u0441"),i.a.createElement(E.TableCell,null,"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b"),i.a.createElement(E.TableCell,null,"\u041a\u0440\u0430\u0439\u043d\u0430 \u0441\u0443\u043c\u0430"),i.a.createElement(E.TableCell,null,"\u0422\u0438\u043f \u043f\u043e\u0440\u044a\u0447\u043a\u0430"),i.a.createElement(E.TableCell,null,"\u041e\u0442\u0441\u0442\u044a\u043f\u043a\u0430"))),i.a.createElement(E.TableBody,null,j.map((function(e,t){return i.a.createElement(E.TableRow,{key:e.id},i.a.createElement(E.TableCell,null,i.a.createElement("div",{className:"flex items-center text-sm"},i.a.createElement("div",null,i.a.createElement("p",{className:"font-semibold"},Z(e.createdAt)+e.id)))),i.a.createElement(E.TableCell,null,i.a.createElement("div",{className:"flex items-center text-sm"},i.a.createElement("div",null,i.a.createElement("p",{className:"font-semibold"},e.createdAt)))),i.a.createElement(E.TableCell,{key:e.id},i.a.createElement(E.Modal,{isOpen:W,onClose:X},i.a.createElement(E.ModalHeader,{className:"flex items-center"},i.a.createElement(v.a,{icon:d.EditIcon,className:"w-6 h-6 mr-3"}),"\u041f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u0441\u0442\u0430\u0442\u0443\u0441"),i.a.createElement(E.ModalBody,null,"\u0421\u0438\u0433\u0443\u0440\u043d\u0438 \u043b\u0438 \u0441\u0442\u0435, \u0447\u0435 \u0438\u0441\u043a\u0430\u0442\u0435 \u0434\u0430 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0430"," ",i.a.createElement("b",null," ","WORKING_ON"===_?"\u0418\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435":"CREATED"===_?"\u0421\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430  ":"SEND"===_?"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430":"DONE"===_?"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430":_)),i.a.createElement(E.ModalFooter,null,i.a.createElement("div",{className:"hidden sm:block"},i.a.createElement(E.Button,{onClick:function(){console.log(e),function(){var e=j.find((function(e){return e.id===M}));if(!e)return console.error("Selected order not found"),void X();var t="".concat(U,"/api/orders/").concat(e.id,"/change-status/").concat(_);m.a.post(t,null,{headers:{Authorization:"Bearer ".concat(k)}}).then((function(e){console.log(t),window.location.reload()})).catch((function(e){})),X()}()}},"\u041f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u043d\u0435")),i.a.createElement("div",{className:"hidden sm:block"},i.a.createElement(E.Button,{layout:"outline",onClick:X},"\u041e\u0442\u043a\u0430\u0437")))),"[ADMIN]"===R.data.role&&i.a.createElement("div",{onClick:function(){return q((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(n.a)({},e.id,!0))}))},style:{cursor:Y[e.id]||"DONE"===e.status?"default":"pointer"}},Y[e.id]?i.a.createElement(E.Select,{value:_,onChange:function(t){return function(e,t){var a=e.target.value;a!==_&&(I(a),H(t.id),G(!0))}(t,e)},onBlur:function(){return q(!1)}},"CREATED"===e.status?i.a.createElement(i.a.Fragment,null,"                            ",i.a.createElement("option",{value:""},"--"),i.a.createElement("option",{value:"WORKING_ON"},"\u0418\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435"),i.a.createElement("option",{value:"SEND"},"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430"),i.a.createElement("option",{value:"DONE"},"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430")):i.a.createElement("option",{value:_},"WORKING_ON"===e.status?"\u0418\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435":"SEND"===e.status?"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430":"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430"),"WORKING_ON"==e.status&&i.a.createElement(i.a.Fragment,null,i.a.createElement("option",{value:"SEND"},"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430"),i.a.createElement("option",{value:"DONE"},"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430")),"SEND"==e.status&&i.a.createElement("option",{value:"DONE"},"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430")):i.a.createElement("div",{className:"flex items-center text-sm ".concat(Q(e.status))},i.a.createElement("div",null,i.a.createElement("p",{className:"font-semibold"},"WORKING_ON"===e.status?"\u0418\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435":"CREATED"===e.status?"\u0421\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430":"SEND"===e.status?"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430":"DONE"===e.status?"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430":e.status,"                      ","DONE"!==e.status&&i.a.createElement("p",{style:{color:"blue"}},"\u041f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u0441\u0442\u0430\u0442\u0443\u0441"))))),"[USER]"===R.data.role&&i.a.createElement("div",{className:"flex items-center text-sm ".concat(Q(e.status))},i.a.createElement("div",null,i.a.createElement("p",{className:"font-semibold"},"WORKING_ON"===e.status?"\u0418\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430 \u0441\u0435":"CREATED"===e.status?"\u0421\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430":"SEND"===e.status?"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430":"DONE"===e.status?"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430":e.status)))),i.a.createElement(E.TableCell,null,i.a.createElement("div",{className:"flex items-center text-sm"},i.a.createElement("div",null,i.a.createElement("p",{className:"font-semibold"},e.user.companyName)))),i.a.createElement(E.TableCell,null,i.a.createElement("div",{className:"flex items-center text-sm"},i.a.createElement("div",null,i.a.createElement("span",{className:"font-semibold"},e.totalPrice),i.a.createElement("span",null,"\u043b\u0432.")))),i.a.createElement(E.TableCell,null,"BY_HAND"===e.type?"\u0420\u044a\u0447\u043d\u043e - \u043e\u0442 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440":"\u041e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442"),i.a.createElement(E.TableCell,null,i.a.createElement("div",{className:"flex items-center text-sm"},i.a.createElement("div",null,i.a.createElement("span",{className:"font-semibold"},"0"),i.a.createElement("span",null,"%")))),i.a.createElement(E.TableCell,{className:"w-1/12 text-center"},i.a.createElement(f.b,{to:"orders/".concat(e.id),className:"text-indigo-600 hover:text-indigo-900"},"\u0414\u0435\u0442\u0430\u0439\u043b\u0438")))})))),i.a.createElement(E.TableFooter,null,i.a.createElement(E.Pagination,{totalResults:S,resultsPerPage:t,onChange:function(e){h(e)}}))))}}}]);
//# sourceMappingURL=7.d693c17e.chunk.js.map