{"version":3,"sources":["pages/SingleCustomer.js","components/Typography/PageTitle.js","Constants.js","components/Icon.js","assets/xlxs/за етикети.xlsx"],"names":["SingleCustomer","_ref","match","apiBaseUrl","config","url","API_BASE_URL","_useState","useState","_useState2","_slicedToArray","isModalOpen","setIsModalOpen","_useState3","_useState4","customer","setCustomer","_useState5","_useState6","editingDiscount","setEditingDiscount","_useState7","_useState8","newDiscount","setNewDiscount","customerId","params","id","token","localStorage","getItem","JSON","parse","closeModal","options","headers","Authorization","concat","useEffect","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","axios","get","sent","data","t0","console","error","stop","apply","arguments","fetchUser","log","React","createElement","Fragment","className","PageTitle","companyName","communicationName","bulstat","email","phone","mol","city","companyAddress","Modal","isOpen","onClose","ModalHeader","Icon","icon","EditIcon","ModalBody","ModalFooter","Button","onClick","appliedDiscount","post","then","window","location","reload","catch","layout","type","value","onChange","event","target","children","props","_objectWithoutProperties","_excluded","module","exports"],"mappings":"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","file":"static/js/24.5e3781a4.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport {\n    Button, Modal,\n    ModalHeader,\n    ModalBody,\n    ModalFooter,\n} from '@windmill/react-ui';\nimport Icon from \"../components/Icon\";\n\nimport {\n    EditIcon,\n\n} from \"../icons\";\nimport PageTitle from \"../components/Typography/PageTitle\";\nimport labelsFile from \"../assets/xlxs/за етикети.xlsx\";\nimport json2xls from 'json2xls'; // Import json2xls\nimport { saveAs } from \"file-saver\"; // Import saveAs function\nimport * as XLSX from 'xlsx';\nimport ExcelJS from 'exceljs';\nimport { config } from '../Constants';\nimport { fa } from 'faker/lib/locales';\n\n\nconst SingleCustomer = ({ match }) => {\n    const apiBaseUrl = config.url.API_BASE_URL;\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    const [customer, setCustomer] = useState(null);\n    const [editingDiscount, setEditingDiscount] = useState(false);\n    const [newDiscount, setNewDiscount] = useState(0); const customerId = match.params.id; // Get the customerId from the route parameter\n    const token = localStorage.getItem('accessToken')\n    const loggedUser = JSON.parse(localStorage.getItem('user'))\n    function closeModal() {\n        setIsModalOpen(false);\n    }\n    const options = {\n        headers: {\n            Authorization: `Bearer ${token}`,\n        },\n    };\n\n    const handleSaveDiscount = () => {\n        if (newDiscount !== customer.appliedDiscount) {\n            // Call the API to update the discount\n            // Make sure to import axios\n            axios\n                .post(apiBaseUrl + `/api/customers/${customerId}/set-discount/${newDiscount}`, null, options)\n                .then(() => {\n                    window.location.reload();\n\n                })\n                .catch(error => {\n                    console.error('Error updating discount:', error);\n                });\n        }\n        setEditingDiscount(false);\n    };\n\n\n    const handleDiscountChange = (event) => {\n        setNewDiscount(event.target.value);\n        closeModal();\n    };\n\n\n\n    useEffect(() => {\n        const fetchUser = async () => {\n            try {\n\n\n                const response = await axios.get(`${apiBaseUrl}/api/customers/${customerId}`, options);\n                setCustomer(response.data);\n            } catch (error) {\n                console.error('Error fetching customer:', error);\n            }\n        };\n\n        fetchUser();\n    }, [customerId, token, apiBaseUrl]);\n\n\n    if (!customer) {\n        return <div>Loading...</div>; // Add a loading indicator while data is being fetched\n    }\n\n\n    return (\n        console.log(apiBaseUrl + `/api/customers/${customerId}`),\n        console.log(customer),\n        <><div>\n            {customer ? ( // Check if customer is not null before rendering\n                <>\n                    <div className='text-center '>\n                        <PageTitle>Клиент :<span> {customer.companyName}</span></PageTitle>\n                    </div>\n                    <div className='grid grid-cols-2 h-10 mb-4 '>\n                        <div className='text-center border'>\n                            <div className='mb-2'>Име: {customer.communicationName}</div>\n\n                            <p className='mr-3'>ЕИК: {customer.bulstat}</p>\n                        </div>\n                        <div className=' text-center border'>\n                            <p className='ml-3'>Email: {customer.email}</p>\n                            <p className='ml-3'>Телефон: {customer.phone}</p>\n                        </div>\n                    </div>\n                    <div className='grid grid-cols-2 border mb-4 '>\n                        <div className='grid grid-cols-1 ml-3 mt-3 mb-3 space-y-[5px]'>\n\n                            <div className='mb-2'>МОЛ: {customer.mol}</div>\n                            <div className='mb-2'>Град: {customer.city}</div>\n                            <div className='mb-2'>Адрес: {customer.companyAddress}</div>\n\n\n                        </div>\n\n                    </div>\n\n\n                    <Modal isOpen={isModalOpen} onClose={closeModal}>\n                        <ModalHeader className=\"flex items-center\">\n                            <Icon icon={EditIcon} className=\"w-6 h-6 mr-3\" />\n                            Промяна на отстъпка\n                        </ModalHeader>\n                        <ModalBody>\n                            Отстъпката ще бъде променена на {\" \"}\n                            {/* {selectedStatus && `\"${selectedStatus}\"`} */}\n                            <b> {newDiscount} %</b>\n\n                        </ModalBody>\n                        <ModalFooter> <div className=\"hidden sm:block\">\n                            <Button onClick={() => { handleSaveDiscount(); } }>\n                                Потвърждаване\n                            </Button></div>\n                            <div className=\"hidden sm:block\">\n                                <Button layout=\"outline\" onClick={closeModal}>\n                                    Отказ\n                                </Button>\n                            </div>\n                        </ModalFooter></Modal>\n\n                </>\n            ) : (\n                <p>Loading...</p> // Display a loading message while fetching data\n            )}\n        </div><div className='ml-4 font-bold justify-center mt-4 text-left'>\n                <span className='text-xl'>\n                    Отстъпка :{' '}\n                    {editingDiscount ? (\n                        <>\n                            <input\n                                type='number'\n                                value={newDiscount}\n                                onChange={handleDiscountChange}\n                                className='border rounded p-1' />\n                            <Button className='ml-4 text-s' onClick={() => { setIsModalOpen(true); } }>\n                                Готово\n                            </Button>\n                            <Button layout=\"outline\" className='ml-4 text-s' onClick={() => { setEditingDiscount(false); } }>\n                                Отказ\n                            </Button>\n                        </>\n                    ) : (\n                        <>\n                            <span>{customer.appliedDiscount !== null ? customer.appliedDiscount + '%' : '0%'}</span>\n                            <Button className='ml-4 text-s' onClick={() => setEditingDiscount(true)}>\n                                Промени\n                            </Button>\n                        </>\n                    )}\n                </span>\n            </div></>\n    );\n};\n\nexport default SingleCustomer;\n","import React from 'react'\n\nfunction PageTitle({ children }) {\n  return (\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\n  )\n}\n\nexport default PageTitle\n","const prod = {\n    url: {\n      API_BASE_URL: 'https://orders-pi314-396621.uc.r.appspot.com' ,\n    }\n  }\n  \n  const dev = {\n    url: {\n      API_BASE_URL: 'http://localhost:8080'\n    }\n  }\n  \n  export const config = process.env.NODE_ENV === 'development' ? dev : prod","import React from \"react\";\n\nconst Icon = ({ icon, ...props }) => {\n  const Icon = icon;\n  return <Icon {...props} />;\n};\n\nexport default Icon;\n","module.exports = __webpack_public_path__ + \"static/media/за етикети.fc2dcc59.xlsx\";"],"sourceRoot":""}