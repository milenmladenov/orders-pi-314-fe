{"ast":null,"code":"import _regeneratorRuntime from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{config}from'../Constants';import{TableBody,TableContainer,Table,TableHeader,TableCell,TableRow,TableFooter,Pagination}from\"@windmill/react-ui\";import{Link}from'react-router-dom';var UsersTable=function UsersTable(_ref){var resultsPerPage=_ref.resultsPerPage,filter=_ref.filter;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var token=localStorage.getItem('accessToken');var apiBaseUrl=config.url.API_BASE_URL;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalResults=_useState6[0],setTotalResults=_useState6[1];// pagination change control\nfunction onPageChange(p){setPage(p);}var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _config,response,userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_config={headers:{Authorization:\"Bearer \".concat(token)}};_context.next=4;return axios.get(apiBaseUrl+\"api/customers\",_config);case 4:response=_context.sent;userData=response.data;setTotalResults(userData.length);setData(userData.slice((page-1)*resultsPerPage,page*resultsPerPage));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching data:\",_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();// on page change, load new sliced data\n// here you would make another server request for new data\nuseEffect(function(){fetchData();},[page,resultsPerPage,filter]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TableContainer,{className:\"mb-8\"},/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHeader,null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(TableCell,null,\"\\u0418\\u043C\\u0435 \"),/*#__PURE__*/React.createElement(TableCell,null,\"\\u041F\\u043E\\u0442\\u0440\\u0435\\u0431\\u0438\\u0442\\u0435\\u043B\\u0441\\u043A\\u043E \\u0438\\u043C\\u0435\"),/*#__PURE__*/React.createElement(TableCell,null,\"Email\"),/*#__PURE__*/React.createElement(TableCell,null,\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"),/*#__PURE__*/React.createElement(TableCell,null))),/*#__PURE__*/React.createElement(TableBody,null,data.map(function(user,i){return/*#__PURE__*/React.createElement(TableRow,{key:i},/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"font-semibold\"},user.companyName))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm\"},user.username)),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm\"},user.email)),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm\"},user.phone)),/*#__PURE__*/React.createElement(TableCell,{className:\"w-1/12 text-center\"},/*#__PURE__*/React.createElement(Link,{to:\"customers/\".concat(user.id),className:\"text-indigo-600 hover:text-indigo-900\"},\"\\u0414\\u0435\\u0442\\u0430\\u0439\\u043B\\u0438\")));}))),/*#__PURE__*/React.createElement(TableFooter,null,/*#__PURE__*/React.createElement(Pagination,{totalResults:totalResults,resultsPerPage:resultsPerPage,label:\"Table navigation\",onChange:onPageChange}))));};export default UsersTable;","map":{"version":3,"names":["React","useState","useEffect","axios","config","TableBody","TableContainer","Table","TableHeader","TableCell","TableRow","TableFooter","Pagination","Link","UsersTable","_ref","resultsPerPage","filter","_useState","_useState2","_slicedToArray","page","setPage","token","localStorage","getItem","apiBaseUrl","url","API_BASE_URL","_useState3","_useState4","data","setData","_useState5","_useState6","totalResults","setTotalResults","onPageChange","p","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_config","response","userData","wrap","_callee$","_context","prev","next","headers","Authorization","concat","get","sent","length","slice","t0","console","error","stop","apply","arguments","createElement","className","map","user","i","key","companyName","username","email","phone","to","id","label","onChange"],"sources":["/Users/milenmladenov/asset-management-fe/src/components/UsersTable.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { config } from '../Constants';\n\n\nimport {\n  TableBody,\n  TableContainer,\n  Table,\n  TableHeader,\n  TableCell,\n  TableRow,\n  TableFooter,\n  Pagination,\n \n} from \"@windmill/react-ui\";\nimport { Link } from 'react-router-dom'\n\n\nconst UsersTable = ({ resultsPerPage, filter }) => {\n  const [page, setPage] = useState(1);\n  const token = localStorage.getItem('accessToken')\n  const apiBaseUrl = config.url.API_BASE_URL;\n\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      const response = await axios.get(apiBaseUrl + \"api/customers\", config);\n      const userData = response.data\n      setTotalResults(userData.length);\n      setData(userData.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  }\n\n  // on page change, load new sliced data\n  // here you would make another server request for new data\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter]);\n\n  return (\n    <div>\n      {/* Table */}\n      <TableContainer className=\"mb-8\">\n        <Table>\n          <TableHeader>\n            <tr>\n              <TableCell>Име </TableCell>\n              <TableCell>Потребителско име</TableCell>\n              <TableCell>Email</TableCell>\n              <TableCell>Телефон</TableCell>\n              <TableCell></TableCell>\n            </tr>\n          </TableHeader>\n          <TableBody>\n            {data.map((user, i) => (\n              <TableRow key={i}>\n                <TableCell>\n                \n                    <div>\n                      <p className=\"font-semibold\">{user.companyName}</p>\n                    </div>\n                </TableCell>\n                <TableCell>\n                  <span className=\"text-sm\">{user.username}</span>\n                </TableCell>\n                <TableCell>\n                  <span className=\"text-sm\">{user.email}</span>\n                </TableCell>\n\n                <TableCell>\n                  <span className=\"text-sm\">{user.phone}\n                  </span>\n                </TableCell>\n                <TableCell className=\"w-1/12 text-center\">\n                  <Link\n                    to={`customers/${user.id}`}\n                    className=\"text-indigo-600 hover:text-indigo-900\"\n                  >\n                    Детайли\n                  </Link>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        <TableFooter>\n          <Pagination\n            totalResults={totalResults}\n            resultsPerPage={resultsPerPage}\n            label=\"Table navigation\"\n            onChange={onPageChange}\n          />\n        </TableFooter>\n      </TableContainer>\n    </div>\n  );\n};\n\nexport default UsersTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}