{"ast":null,"code":"var _jsxFileName = \"/Users/milenmladenov/asset-management-fe-1/src/components/OrdersTable.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { TableBody, TableContainer, Table, TableHeader, TableCell, TableRow, TableFooter, Pagination, Button, Select, Modal, ModalHeader, ModalBody, ModalFooter } from \"@windmill/react-ui\";\nimport { EditIcon } from \"../icons\";\nimport { Link } from 'react-router-dom';\nimport { saveAs } from \"file-saver\"; // Import saveAs function\nimport ExcelJS from 'exceljs';\nimport Icon from \"../components/Icon\";\nimport { config } from '../Constants';\nconst OrdersTable = _ref => {\n  let {\n    resultsPerPage,\n    filter\n  } = _ref;\n  const [page, setPage] = useState(1);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken');\n  const loggedUser = JSON.parse(localStorage.getItem('user'));\n  const [selectedStatus, setSelectedStatus] = useState();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedOrderId, setSelectedOrderId] = useState(null); // Define selectedOrderId state\n  const apiBaseUrl = config.url.API_BASE_URL;\n  const [isEditing, setIsEditing] = useState([]);\n  const getStatusColor = status => {\n    switch (status) {\n      case \"WORKING_ON\":\n        return \"text-yellow-500\";\n      // Yellow color\n      case \"CREATED\":\n        return \"text-gray-500\";\n      case \"SEND\":\n        return \"text-blue-500\";\n      case \"DONE\":\n        return \"text-green-500\";\n        return \"\";\n    }\n  };\n  useEffect(() => {\n    const editingState = {};\n    data.forEach(order => {\n      editingState[order.id] = false;\n    });\n    setIsEditing(editingState);\n  }, [data]);\n  const handleChange = (event, order) => {\n    const newStatus = event.target.value;\n    if (newStatus !== selectedStatus) {\n      setSelectedStatus(newStatus);\n      setSelectedOrderId(order.id);\n      setIsModalOpen(true);\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      const response = await axios.get(apiBaseUrl + \"/api/orders/all\", config);\n      const ordersData = response.data;\n\n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"изпратена\") {\n        filteredData = ordersData.filter(order => order.status === \"SEND\");\n      } else if (filter === \"създадена\") {\n        filteredData = ordersData.filter(order => order.status === \"CREATED\");\n      } else if (filter === \"изпълнява се\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      } else if (filter === \"изпълнена\") {\n        filteredData = ordersData.filter(order => order.status === \"DONE\");\n      }\n\n      // Flatten the groups and update the totalResults and data state\n      const flattenedGroups = filteredData.flatMap(order => order);\n      setTotalResults(flattenedGroups.length);\n      setData(flattenedGroups.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  const handleConfirmChange = () => {\n    const order = data.find(order => order.id === selectedOrderId); // Find the order using selectedOrderId\n    if (!order) {\n      console.error(\"Selected order not found\");\n      closeModal();\n      return;\n    }\n\n    // Make API call to change the order status using Axios\n    const url = `${apiBaseUrl}/api/orders/${order.id}/change-status/${selectedStatus}`;\n    axios.post(url, null, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      console.log(url);\n      window.location.reload();\n      // Handle response as needed\n    }).catch(error => {\n      // Handle error\n    });\n    closeModal();\n  };\n  function closeModal() {\n    setIsModalOpen(false);\n    // window.location.reload();\n  }\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n  const formatDateWithoutDashes = dateString => {\n    const date = new Date(dateString);\n    const options = {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit'\n    };\n    return date.toLocaleDateString('en-US', options).replace(/\\//g, ''); // Remove slashes\n  };\n\n  const exportToExcel = async () => {\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Справка');\n    const headerRow = [\"ПОРЕДЕН НОМЕР\", \"Група\", \"ДАТА\", \"ПОРЪЧКА\", \"КЛИЕНТ\", \"ВИД\", \"ГРАД\", \"ЕТИКЕТ\", \"МОДЕЛ\", \"ВИСОЧИНА\", \"ШИРИНА\", \"БРОЙ КОЛИЧЕСТВО\", \"МЕРНА ЕДИНИЦА\", \"ДРЪЖКА\", \"ЕДИНИЧНА ЦЕНА\", \"ЦЕНА НА ДРЪЖКА\", \"ДВУСТРАННО ФОЛИРАНЕ\", \"СТОЙНОСТ\", \"ФОЛИО\", \"ПРОФИЛ\"];\n    worksheet.addRow(headerRow);\n    data.forEach(order => {\n      order.groups.forEach(group => {\n        const rowData = [formatDateWithoutDashes(order.createdAt) + order.id, \"Група\", order.createdAt, order.id, order.user.companyName, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\", order.user.city, order.detailType, group.model.name, group.height, group.width, group.number, \"квадратен метър\", group.handle.name, group.handle.price, \"Цена на Дръжка\", group.bothSidesLaminated ? \"ДВУСТРАННО\" : \"\", order.totalPrice, group.folio.name, group.profil.name];\n        const newRow = worksheet.addRow(rowData);\n\n        // Check if order status is CREATED and set row color to red\n        if (order.status === \"CREATED\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: {\n              argb: 'FF00FF00'\n            } // Green colornpom \n          };\n        } else if (order.status === \"WORKING_ON\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: {\n              argb: 'FFFFFF00'\n            } // Yellow color\n          };\n        }\n      });\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    const blob = new Blob([buffer], {\n      type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n    });\n    saveAs(blob, 'Справка - ' + new Date().toLocaleDateString() + '.xlsx');\n  };\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }\n  }, loggedUser.data.role === '[ADMIN]' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    layout: \"outline\",\n    onClick: exportToExcel,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }, \"\\u0415\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 \\u043D\\u0430 \\u0441\\u043F\\u0440\\u0430\\u0432\\u043A\\u0430\")), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"customeDivider mx-4 my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TableContainer, {\n    className: \"mb-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, \"\\u041D\\u043E\\u043C\\u0435\\u0440\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, \"O\\u0442 \\u0434\\u0430\\u0442\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }\n  }, \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  }, \"\\u041F\\u043E\\u0442\\u0440\\u0435\\u0431\\u0438\\u0442\\u0435\\u043B\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }, \"\\u041A\\u0440\\u0430\\u0439\\u043D\\u0430 \\u0441\\u0443\\u043C\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, \"\\u0422\\u0438\\u043F \\u043F\\u043E\\u0440\\u044A\\u0447\\u043A\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }, \"\\u041E\\u0442\\u0441\\u0442\\u044A\\u043F\\u043A\\u0430\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, data.map((order, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: order.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 23\n    }\n  }, formatDateWithoutDashes(order.createdAt) + order.id)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 23\n    }\n  }, order.createdAt)))), /*#__PURE__*/React.createElement(TableCell, {\n    key: order.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isModalOpen,\n    onClose: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: EditIcon,\n    className: \"w-6 h-6 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 23\n    }\n  }), \"\\u041F\\u0440\\u043E\\u043C\\u044F\\u043D\\u0430 \\u043D\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }\n  }, \"\\u0421\\u0438\\u0433\\u0443\\u0440\\u043D\\u0438 \\u043B\\u0438 \\u0441\\u0442\\u0435, \\u0447\\u0435 \\u0438\\u0441\\u043A\\u0430\\u0442\\u0435 \\u0434\\u0430 \\u043F\\u0440\\u043E\\u043C\\u0435\\u043D\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\\u0430 \\u043D\\u0430\", \" \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 23\n    }\n  }, \" \", selectedStatus === \"WORKING_ON\" ? \"Изпълнява се\" : selectedStatus === \"CREATED\" ? \"Създадена  \" : selectedStatus === \"SEND\" ? \"Изпратена\" : selectedStatus === \"DONE\" ? \"Изпълнена\" : selectedStatus)), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden sm:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      console.log(order);\n      handleConfirmChange(order);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 25\n    }\n  }, \"\\u041F\\u043E\\u0442\\u0432\\u044A\\u0440\\u0436\\u0434\\u0430\\u0432\\u0430\\u043D\\u0435\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden sm:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    layout: \"outline\",\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 25\n    }\n  }, \"\\u041E\\u0442\\u043A\\u0430\\u0437\")))), loggedUser.data.role === '[ADMIN]' && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setIsEditing(prevState => ({\n      ...prevState,\n      [order.id]: true\n    })),\n    style: {\n      cursor: isEditing[order.id] || order.status === \"DONE\" ? \"default\" : \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 21\n    }\n  }, isEditing[order.id] ? /*#__PURE__*/React.createElement(Select, {\n    value: selectedStatus,\n    onChange: event => handleChange(event, order),\n    onBlur: () => setIsEditing(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 25\n    }\n  }, order.status === \"CREATED\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"                            \", /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 59\n    }\n  }, \"--\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"WORKING_ON\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 31\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u044F\\u0432\\u0430 \\u0441\\u0435\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"SEND\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 79\n    }\n  }, \"\\u0418\\u0437\\u043F\\u0440\\u0430\\u0442\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"DONE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 118\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u0435\\u043D\\u0430\")) : /*#__PURE__*/React.createElement(\"option\", {\n    value: selectedStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 29\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"SEND\" ? \"Изпратена\" : \"Изпълнена\"), order.status == \"WORKING_ON\" && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"SEND\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 31\n    }\n  }, \"\\u0418\\u0437\\u043F\\u0440\\u0430\\u0442\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"DONE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 70\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u0435\\u043D\\u0430\")), order.status == \"SEND\" && /*#__PURE__*/React.createElement(\"option\", {\n    value: \"DONE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 29\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u0435\\u043D\\u0430\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: `flex items-center text-sm ${getStatusColor(order.status)}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 29\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status, \"                      \", order.status !== \"DONE\" && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"blue\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 267\n    }\n  }, \"\\u041F\\u0440\\u043E\\u043C\\u044F\\u043D\\u0430 \\u043D\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"))))), loggedUser.data.role === '[USER]' && /*#__PURE__*/React.createElement(\"div\", {\n    className: `flex items-center text-sm ${getStatusColor(order.status)}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 25\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 23\n    }\n  }, order.user.companyName)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 23\n    }\n  }, order.totalPrice), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 80\n    }\n  }, \"\\u043B\\u0432.\")))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 17\n    }\n  }, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 21\n    }\n  }, \" \", order.type === 'BY_USER' && order.discount !== 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 23\n    }\n  }, order.discount, \"% \")))), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"w-1/12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `orders/${order.id}`,\n    className: \"text-indigo-600 hover:text-indigo-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 19\n    }\n  }, \"\\u0414\\u0435\\u0442\\u0430\\u0439\\u043B\\u0438\")), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"w-1/12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 17\n    }\n  }, loggedUser.data.role === '[ADMIN]' || loggedUser.data.role === '[USER]' && order.status === 'CREATED' ? /*#__PURE__*/React.createElement(Link, {\n    to: `orders/edit/${order.id}`,\n    className: \"text-indigo-600 hover:text-indigo-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 21\n    }\n  }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0430\\u043D\\u0435\") : null))))), /*#__PURE__*/React.createElement(TableFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    totalResults: totalResults,\n    resultsPerPage: resultsPerPage,\n    onChange: onPageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 11\n    }\n  }))));\n};\nexport default OrdersTable;","map":{"version":3,"names":["React","useState","useEffect","axios","TableBody","TableContainer","Table","TableHeader","TableCell","TableRow","TableFooter","Pagination","Button","Select","Modal","ModalHeader","ModalBody","ModalFooter","EditIcon","Link","saveAs","ExcelJS","Icon","config","OrdersTable","_ref","resultsPerPage","filter","page","setPage","data","setData","totalResults","setTotalResults","token","localStorage","getItem","loggedUser","JSON","parse","selectedStatus","setSelectedStatus","isModalOpen","setIsModalOpen","selectedOrderId","setSelectedOrderId","apiBaseUrl","url","API_BASE_URL","isEditing","setIsEditing","getStatusColor","status","editingState","forEach","order","id","handleChange","event","newStatus","target","value","fetchData","headers","Authorization","response","get","ordersData","filteredData","flattenedGroups","flatMap","length","slice","error","console","handleConfirmChange","find","closeModal","post","then","log","window","location","reload","catch","onPageChange","p","formatDateWithoutDashes","dateString","date","Date","options","year","month","day","toLocaleDateString","replace","exportToExcel","workbook","Workbook","worksheet","addWorksheet","headerRow","addRow","groups","group","rowData","createdAt","user","companyName","type","city","detailType","model","name","height","width","number","handle","price","bothSidesLaminated","totalPrice","folio","profil","newRow","fill","pattern","fgColor","argb","buffer","xlsx","writeBuffer","blob","Blob","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","role","Fragment","className","layout","onClick","map","index","key","isOpen","onClose","icon","prevState","style","cursor","onChange","onBlur","color","discount","to"],"sources":["/Users/milenmladenov/asset-management-fe-1/src/components/OrdersTable.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  TableBody,\n  TableContainer,\n  Table,\n  TableHeader,\n  TableCell,\n  TableRow,\n  TableFooter,\n  Pagination,\n  Button, Select, Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter\n} from \"@windmill/react-ui\";\nimport {\n  EditIcon,\n\n} from \"../icons\";\nimport { Link } from 'react-router-dom'\nimport { saveAs } from \"file-saver\"; // Import saveAs function\nimport ExcelJS from 'exceljs';\nimport Icon from \"../components/Icon\";\nimport { config } from '../Constants';\n\n\n\n\n\n\n\n\nconst OrdersTable = ({ resultsPerPage, filter }) => {\n  const [page, setPage] = useState(1);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken')\n  const loggedUser = JSON.parse(localStorage.getItem('user'))\n  const [selectedStatus, setSelectedStatus] = useState();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedOrderId, setSelectedOrderId] = useState(null); // Define selectedOrderId state\n  const apiBaseUrl = config.url.API_BASE_URL;\n  const [isEditing, setIsEditing] = useState([]);\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case \"WORKING_ON\":\n        return \"text-yellow-500\"; // Yellow color\n      case \"CREATED\":\n        return \"text-gray-500\";\n      case \"SEND\":\n        return \"text-blue-500\";\n      case \"DONE\":\n        return \"text-green-500\";\n        return \"\";\n    }\n  };\n  useEffect(() => {\n    const editingState = {};\n    data.forEach(order => {\n      editingState[order.id] = false;\n    });\n    setIsEditing(editingState);\n  }, [data]);\n\n\n  const handleChange = (event, order) => {\n    const newStatus = event.target.value;\n    if (newStatus !== selectedStatus) {\n      setSelectedStatus(newStatus);\n      setSelectedOrderId(order.id);\n      setIsModalOpen(true);\n    }\n  };\n\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      const response = await axios.get(apiBaseUrl + \"/api/orders/all\", config);\n      const ordersData = response.data;\n\n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"изпратена\") {\n        filteredData = ordersData.filter(order => order.status === \"SEND\");\n      } else if (filter === \"създадена\") {\n        filteredData = ordersData.filter(order => order.status === \"CREATED\");\n      } else if (filter === \"изпълнява се\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      } else if (filter === \"изпълнена\") {\n        filteredData = ordersData.filter(order => order.status === \"DONE\");\n      }\n\n      // Flatten the groups and update the totalResults and data state\n      const flattenedGroups = filteredData.flatMap(order => order);\n      setTotalResults(flattenedGroups.length);\n      setData(flattenedGroups.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  const handleConfirmChange = () => {\n    const order = data.find(order => order.id === selectedOrderId); // Find the order using selectedOrderId\n    if (!order) {\n      console.error(\"Selected order not found\");\n      closeModal();\n      return;\n    }\n\n    // Make API call to change the order status using Axios\n    const url = `${apiBaseUrl}/api/orders/${order.id}/change-status/${selectedStatus}`;\n    axios\n      .post(url, null, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((response) => {\n        console.log(url);\n        window.location.reload()\n        // Handle response as needed\n      })\n      .catch((error) => {\n        // Handle error\n      });\n\n    closeModal();\n  };\n  function closeModal() {\n    setIsModalOpen(false);\n    // window.location.reload();\n  }\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n\n  const formatDateWithoutDashes = (dateString) => {\n    const date = new Date(dateString);\n    const options = { year: 'numeric', month: '2-digit', day: '2-digit' };\n    return date.toLocaleDateString('en-US', options).replace(/\\//g, ''); // Remove slashes\n  };\n\n\n\n  const exportToExcel = async () => {\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Справка');\n\n    const headerRow = [\n      \"ПОРЕДЕН НОМЕР\", \"Група\", \"ДАТА\", \"ПОРЪЧКА\", \"КЛИЕНТ\", \"ВИД\", \"ГРАД\",\n      \"ЕТИКЕТ\", \"МОДЕЛ\", \"ВИСОЧИНА\", \"ШИРИНА\", \"БРОЙ КОЛИЧЕСТВО\",\n      \"МЕРНА ЕДИНИЦА\", \"ДРЪЖКА\", \"ЕДИНИЧНА ЦЕНА\", \"ЦЕНА НА ДРЪЖКА\",\n      \"ДВУСТРАННО ФОЛИРАНЕ\", \"СТОЙНОСТ\", \"ФОЛИО\", \"ПРОФИЛ\",\n    ];\n\n    worksheet.addRow(headerRow);\n\n    data.forEach(order => {\n\n      order.groups.forEach(group => {\n        const rowData = [\n          formatDateWithoutDashes(order.createdAt) + order.id, \"Група\", order.createdAt, order.id, order.user.companyName, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\",\n          order.user.city, order.detailType, group.model.name, group.height, group.width, group.number,\n          \"квадратен метър\", group.handle.name, group.handle.price, \"Цена на Дръжка\",\n          group.bothSidesLaminated ? \"ДВУСТРАННО\" : \"\", order.totalPrice, group.folio.name, group.profil.name\n        ];\n        const newRow = worksheet.addRow(rowData);\n\n        // Check if order status is CREATED and set row color to red\n        if (order.status === \"CREATED\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: { argb: 'FF00FF00' }, // Green colornpom \n          };\n        } else if (order.status === \"WORKING_ON\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: { argb: 'FFFFFF00' }, // Yellow color\n          };\n        }\n      });\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n\n    saveAs(blob, 'Справка - ' + new Date().toLocaleDateString() + '.xlsx');\n  };\n\n\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter]);\n  return (\n    <div>\n      {loggedUser.data.role === '[ADMIN]' && (\n        <>\n          <div className=\"mt-4 \">\n            <Button layout=\"outline\" onClick={exportToExcel} className=\"btn btn-primary\">\n              Експорт на справка\n            </Button>\n          </div>\n          <hr className=\"customeDivider mx-4 my-5\" />\n        </>\n      )}\n\n      {/* Table */}\n      <TableContainer className=\"mb-8\">\n        <Table>\n          <TableHeader>\n            <tr>\n              <TableCell>Номер</TableCell>\n              <TableCell>Oт дата</TableCell>\n              <TableCell>Статус</TableCell>\n              <TableCell>Потребител</TableCell>\n              <TableCell>Крайна сума</TableCell>\n              <TableCell>Тип поръчка</TableCell>\n              <TableCell>Отстъпка</TableCell>\n            </tr>\n          </TableHeader>\n          <TableBody>\n\n            {data.map((order, index) => (\n              <TableRow key={order.id}>\n                <TableCell>\n                  <div className=\"flex items-center text-sm\">\n                    <div>\n                      <p className=\"font-semibold\">{formatDateWithoutDashes(order.createdAt) + order.id}</p>\n                    </div>\n                  </div>\n                </TableCell>\n                <TableCell>\n                  <div className=\"flex items-center text-sm\">\n                    <div>\n                      <p className=\"font-semibold\">{order.createdAt}</p>\n                    </div>\n                  </div>\n                </TableCell>\n                <TableCell key={order.id} >\n                  <Modal isOpen={isModalOpen} onClose={closeModal}>\n                    <ModalHeader className=\"flex items-center\">\n                      <Icon icon={EditIcon} className=\"w-6 h-6 mr-3\" />\n                      Промяна на статус\n                    </ModalHeader>\n                    <ModalBody>\n                      Сигурни ли сте, че искате да промените статуса на{\" \"}\n                      {/* {selectedStatus && `\"${selectedStatus}\"`} */}\n                      <b> {selectedStatus === \"WORKING_ON\" ? \"Изпълнява се\" : selectedStatus === \"CREATED\" ? \"Създадена  \" : selectedStatus === \"SEND\" ? \"Изпратена\" : selectedStatus === \"DONE\" ? \"Изпълнена\" : selectedStatus}</b>\n\n                    </ModalBody>\n                    <ModalFooter>\n                      <div className=\"hidden sm:block\">\n                        <Button onClick={() => { console.log(order); handleConfirmChange(order) }}>\n                          Потвърждаване\n                        </Button>\n                      </div>\n                      <div className=\"hidden sm:block\">\n                        <Button layout=\"outline\" onClick={closeModal}>\n                          Отказ\n                        </Button>\n                      </div>\n                    </ModalFooter>\n                  </Modal>\n\n                  {loggedUser.data.role === '[ADMIN]' && (\n                    <div onClick={() => setIsEditing(prevState => ({ ...prevState, [order.id]: true }))} style={{ cursor: isEditing[order.id] || order.status === \"DONE\" ? \"default\" : \"pointer\" }}>\n                      {isEditing[order.id] ? (\n                        <Select\n                          value={selectedStatus}\n                          onChange={(event) => handleChange(event, order)}\n                          onBlur={() => setIsEditing(false)}\n                        >\n                          {order.status === \"CREATED\" ? (\n\n                            <>                            <option value=\"\">--</option>\n                              <option value=\"WORKING_ON\">Изпълнява се</option><option value=\"SEND\">Изпратена</option><option value=\"DONE\">Изпълнена</option></>\n\n\n                          ) : (\n                            <option value={selectedStatus}>\n                              {order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"SEND\" ? \"Изпратена\" : \"Изпълнена\"}\n                            </option>\n                          )}\n                          {order.status == \"WORKING_ON\" && (\n                            <><option value=\"SEND\">Изпратена</option><option value=\"DONE\">Изпълнена</option></>)}\n                          {order.status == \"SEND\" && (\n                            <option value=\"DONE\">Изпълнена</option>)}\n\n                        </Select>\n                      ) : (\n                        <div className={`flex items-center text-sm ${getStatusColor(order.status)}`}>\n                          <div>\n                            <p className=\"font-semibold\">\n                              {order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status}                      {order.status !== \"DONE\" && <p style={{ color: \"blue\" }}>Промяна на статус</p>}\n\n                            </p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  {loggedUser.data.role === '[USER]' && (\n                    <div className={`flex items-center text-sm ${getStatusColor(order.status)}`}>\n                      <div>\n                        <p className=\"font-semibold\">\n                          {order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status}</p>\n\n                      </div>\n                    </div>)}\n                </TableCell>\n                <TableCell>\n\n                  <div className=\"flex items-center text-sm\">\n                    <div>\n                      <p className=\"font-semibold\">{order.user.companyName}</p>\n                    </div>\n                  </div>\n                </TableCell>\n\n                <TableCell>\n                  <div className=\"flex items-center text-sm\">\n                    <div>\n                      <span className=\"font-semibold\">{order.totalPrice}</span><span>лв.</span>\n                    </div>\n                  </div>\n                </TableCell>\n\n\n                <TableCell>\n                  {order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\"}\n                </TableCell>\n                <TableCell>\n                  <div className=\"flex items-center text-sm\">\n                    <div> { order.type === 'BY_USER' && order.discount !== 0 && (\n                      <span className=\"font-semibold\">{order.discount}% </span> )}\n                    </div>\n                  </div>\n                </TableCell>\n                <TableCell className=\"w-1/12 text-center\">\n                  <Link\n                    to={`orders/${order.id}`}\n                    className=\"text-indigo-600 hover:text-indigo-900\"\n                  >\n                    Детайли\n                  </Link>\n                </TableCell>\n\n                <TableCell className=\"w-1/12 text-center\">\n                  {loggedUser.data.role === '[ADMIN]' || (loggedUser.data.role === '[USER]' && order.status === 'CREATED') ? (\n                    <Link to={`orders/edit/${order.id}`} className=\"text-indigo-600 hover:text-indigo-900\">\n                      Редактиране\n                    </Link>\n                  ) : null}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        <TableFooter>\n\n          <Pagination\n            totalResults={totalResults}\n            resultsPerPage={resultsPerPage}\n            onChange={onPageChange}\n          />\n        </TableFooter>\n      </TableContainer>\n    </div>\n  );\n};\n\nexport default OrdersTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}