{"ast":null,"code":"import _defineProperty from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/milenmladenov/asset-management-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NavLink,Redirect}from'react-router-dom';import{Button,Form,Grid,Segment,Message}from'semantic-ui-react';import AuthContext from'../components/context/AuthContext';import{orderApi}from'../components/misc/OrderApi';import{parseJwt,handleLogError}from'../components/misc/Helpers';var CreateAccount=/*#__PURE__*/function(_Component){_inherits(CreateAccount,_Component);var _super=_createSuper(CreateAccount);function CreateAccount(){var _this;_classCallCheck(this,CreateAccount);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:'',password:'',name:'',email:'',isLoggedIn:false,isError:false,errorMessage:''};_this.handleInputChange=function(e,_ref){var name=_ref.name,value=_ref.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(e){e.preventDefault();var _this$state=_this.state,username=_this$state.username,password=_this$state.password,name=_this$state.name,email=_this$state.email;if(!(username&&password&&name&&email)){_this.setState({isError:true,errorMessage:'Please, inform all fields!'});return;}var user={username:username,password:password,name:name,email:email};orderApi.signup(user).then(function(response){var accessToken=response.data.accessToken;var data=parseJwt(accessToken);var user={data:data,accessToken:accessToken};var Auth=_this.context;Auth.userLogin(user);_this.setState({username:'',password:'',isLoggedIn:true,isError:false,errorMessage:''});}).catch(function(error){handleLogError(error);if(error.response&&error.response.data){var errorData=error.response.data;var errorMessage='Invalid fields';if(errorData.status===409){errorMessage=errorData.message;}else if(errorData.status===400){errorMessage=errorData.errors[0].defaultMessage;}_this.setState({isError:true,errorMessage:errorMessage});}});};return _this;}_createClass(CreateAccount,[{key:\"componentDidMount\",value:function componentDidMount(){var Auth=this.context;var isLoggedIn=Auth.userIsAuthenticated();this.setState({isLoggedIn:isLoggedIn});}},{key:\"render\",value:function render(){var _this$state2=this.state,isLoggedIn=_this$state2.isLoggedIn,isError=_this$state2.isError,errorMessage=_this$state2.errorMessage;if(isLoggedIn){return/*#__PURE__*/React.createElement(Redirect,{to:\"/app\"});}else{return/*#__PURE__*/React.createElement(Grid,{textAlign:\"center\"},/*#__PURE__*/React.createElement(Grid.Column,{style:{maxWidth:450}},/*#__PURE__*/React.createElement(Form,{size:\"large\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Form.Input,{fluid:true,autoFocus:true,name:\"username\",icon:\"user\",iconPosition:\"left\",placeholder:\"Username\",onChange:this.handleInputChange}),/*#__PURE__*/React.createElement(Form.Input,{fluid:true,name:\"password\",icon:\"lock\",iconPosition:\"left\",placeholder:\"Password\",type:\"password\",onChange:this.handleInputChange}),/*#__PURE__*/React.createElement(Form.Input,{fluid:true,name:\"name\",icon:\"address card\",iconPosition:\"left\",placeholder:\"Name\",onChange:this.handleInputChange}),/*#__PURE__*/React.createElement(Form.Input,{fluid:true,name:\"email\",icon:\"at\",iconPosition:\"left\",placeholder:\"Email\",onChange:this.handleInputChange}),/*#__PURE__*/React.createElement(Button,{color:\"violet\",fluid:true,size:\"large\"},\"Signup\"))),/*#__PURE__*/React.createElement(Message,null,\"Already have an account? \",/*#__PURE__*/React.createElement(\"a\",{href:\"/login\",color:\"violet\",as:NavLink,to:\"/login\"},\"Login\")),isError&&/*#__PURE__*/React.createElement(Message,{negative:true},errorMessage)));}}}]);return CreateAccount;}(Component);CreateAccount.contextType=AuthContext;export default CreateAccount;","map":{"version":3,"names":["React","Component","NavLink","Redirect","Button","Form","Grid","Segment","Message","AuthContext","orderApi","parseJwt","handleLogError","CreateAccount","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","username","password","name","email","isLoggedIn","isError","errorMessage","handleInputChange","e","_ref","value","setState","_defineProperty","handleSubmit","preventDefault","_this$state","user","signup","then","response","accessToken","data","Auth","context","userLogin","catch","error","errorData","status","message","errors","defaultMessage","_createClass","key","componentDidMount","userIsAuthenticated","render","_this$state2","createElement","to","textAlign","Column","style","maxWidth","size","onSubmit","Input","fluid","autoFocus","icon","iconPosition","placeholder","onChange","type","color","href","as","negative","contextType"],"sources":["/Users/milenmladenov/asset-management-fe/src/pages/CreateAccount.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { NavLink, Redirect } from 'react-router-dom'; \nimport { Button, Form, Grid, Segment, Message } from 'semantic-ui-react'\nimport AuthContext from '../components/context/AuthContext'\nimport { orderApi } from '../components/misc/OrderApi'\nimport { parseJwt, handleLogError } from '../components/misc/Helpers'\nclass CreateAccount extends Component {\n  static contextType = AuthContext\n\n  state = {\n    username: '',\n    password: '',\n    name: '',\n    email: '',\n    isLoggedIn: false,\n    isError: false,\n    errorMessage: ''\n  }\n\n  componentDidMount() {\n    const Auth = this.context\n    const isLoggedIn = Auth.userIsAuthenticated()\n    this.setState({ isLoggedIn })\n  }\n\n  handleInputChange = (e, {name, value}) => {\n    this.setState({ [name]: value })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault()\n\n    const { username, password, name, email } = this.state\n    if (!(username && password && name && email)) {\n      this.setState({\n        isError: true,\n        errorMessage: 'Please, inform all fields!'\n      })\n      return\n    }\n\n    const user = { username, password, name, email }\n    orderApi.signup(user)\n      .then(response => {\n        const { accessToken } = response.data\n        const data = parseJwt(accessToken)\n        const user = { data, accessToken }\n\n        const Auth = this.context\n        Auth.userLogin(user)\n\n        this.setState({\n          username: '',\n          password: '',\n          isLoggedIn: true,\n          isError: false,\n          errorMessage: ''\n        })\n      })\n      .catch(error => {\n        handleLogError(error)\n        if (error.response && error.response.data) {\n          const errorData = error.response.data\n          let errorMessage = 'Invalid fields'\n          if (errorData.status === 409) {\n            errorMessage = errorData.message\n          } else if (errorData.status === 400) {\n            errorMessage = errorData.errors[0].defaultMessage\n          }\n          this.setState({\n            isError: true,\n            errorMessage\n          })\n        }\n      })\n  }\n\n  render() {\n    const { isLoggedIn, isError, errorMessage } = this.state\n\n    if (isLoggedIn) {\n      return <Redirect to='/app' />\n    } else {\n      return (\n        <Grid textAlign='center'>\n          <Grid.Column style={{ maxWidth: 450 }}>\n            <Form size='large' onSubmit={this.handleSubmit}>\n              <Segment>\n                <Form.Input\n                  fluid\n                  autoFocus\n                  name='username'\n                  icon='user'\n                  iconPosition='left'\n                  placeholder='Username'\n                  onChange={this.handleInputChange}\n                />\n                <Form.Input\n                  fluid\n                  name='password'\n                  icon='lock'\n                  iconPosition='left'\n                  placeholder='Password'\n                  type='password'\n                  onChange={this.handleInputChange}\n                />\n                <Form.Input\n                  fluid\n                  name='name'\n                  icon='address card'\n                  iconPosition='left'\n                  placeholder='Name'\n                  onChange={this.handleInputChange}\n                />\n                <Form.Input\n                  fluid\n                  name='email'\n                  icon='at'\n                  iconPosition='left'\n                  placeholder='Email'\n                  onChange={this.handleInputChange}\n                />\n                <Button color='violet' fluid size='large'>Signup</Button>\n              </Segment>\n            </Form>\n            <Message>{`Already have an account? `}\n              <a href='/login' color='violet' as={NavLink} to=\"/login\">Login</a>\n            </Message>\n            {isError && <Message negative>{errorMessage}</Message>}\n          </Grid.Column>\n        </Grid>\n      )\n    }\n  }\n}\n\nexport default CreateAccount"],"mappings":"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"},"metadata":{},"sourceType":"module"}