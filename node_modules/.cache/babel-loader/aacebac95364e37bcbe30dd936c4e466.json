{"ast":null,"code":"var _jsxFileName = \"/Users/milen.mladenov/asset-management-fe/src/components/UsersTable.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { config } from '../Constants';\nimport { SearchIcon } from \"../icons\";\nimport { Input } from \"@windmill/react-ui\";\nimport { TableBody, TableContainer, Table, TableHeader, TableCell, TableRow, TableFooter, Modal, ModalBody, ModalFooter, ModalHeader, Button } from \"@windmill/react-ui\";\nimport { Link } from 'eact-router-dom';\nconst UsersTable = _ref => {\n  let {\n    resultsPerPage,\n    filter\n  } = _ref;\n  const [page, setPage] = useState(1);\n  const token = localStorage.getItem('accessToken');\n  const apiBaseUrl = config.url.API_BASE_URL;\n  const [searchParam, setSearchParam] = useState('');\n  const [filteredCustomers, setFilteredCustomers] = useState([]);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [customerToActivate, setCustomerToActivate] = useState(null);\n\n  //...\n\n  const handleActivateUser = user => {\n    setCustomerToActivate(user);\n    setShowModal(true);\n  };\n  const handleModalClose = () => {\n    setShowModal(false);\n  };\n  const handleActivateConfirm = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      await axios.post(`${apiBaseUrl}/api/activate-user/${customerToActivate.id}`, config);\n      fetchData(); // Refresh the data after activation\n    } catch (error) {\n      console.error('Error activating user:', error);\n    }\n    setShowModal(false);\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, data.map((user, i) => /*#__PURE__*/React.createElement(TableRow, {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, user.isActive ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D\") : /*#__PURE__*/React.createElement(Button, {\n    layout: \"outline\",\n    className: \"text-gray-50 bg-green-500\",\n    onClick: () => handleActivateUser(user),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u0430\\u043D\\u0435\"))))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: showModal,\n    onClose: handleModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u043F\\u043E\\u0442\\u0440\\u0435\\u0431\\u0438\\u0442\\u0435\\u043B\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"\\u0421\\u0438\\u0433\\u0443\\u0440\\u043D\\u0438 \\u043B\\u0438 \\u0441\\u0442\\u0435, \\u0447\\u0435 \\u0438\\u0441\\u043A\\u0430\\u0442\\u0435 \\u0434\\u0430 \\u0430\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u0430\\u0442\\u0435 \\u043F\\u043E\\u0442\\u0440\\u0435\\u0431\\u0438\\u0442\\u0435\\u043B\\u044F \", customerToActivate && customerToActivate.username, \"?\")), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"\\u041E\\u0442\\u043A\\u0430\\u0436\\u0438\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleActivateConfirm,\n    className: \"bg-green-500 hover:bg-green-700 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u0430\\u043D\\u0435\"))));\n};\nexport default UsersTable;","map":{"version":3,"names":["React","useState","useEffect","axios","config","SearchIcon","Input","TableBody","TableContainer","Table","TableHeader","TableCell","TableRow","TableFooter","Modal","ModalBody","ModalFooter","ModalHeader","Button","Link","UsersTable","_ref","resultsPerPage","filter","page","setPage","token","localStorage","getItem","apiBaseUrl","url","API_BASE_URL","searchParam","setSearchParam","filteredCustomers","setFilteredCustomers","data","setData","totalResults","setTotalResults","showModal","setShowModal","customerToActivate","setCustomerToActivate","handleActivateUser","user","handleModalClose","handleActivateConfirm","headers","Authorization","post","id","fetchData","error","console","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","i","key","isActive","layout","className","onClick","isOpen","onClose","username"],"sources":["/Users/milen.mladenov/asset-management-fe/src/components/UsersTable.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { config } from '../Constants';\nimport {\n  SearchIcon\n} from \"../icons\";\nimport {\n  Input\n} from \"@windmill/react-ui\";\nimport {\n  TableBody,\n  TableContainer,\n  Table,\n  TableHeader,\n  TableCell,\n  TableRow,\n  TableFooter,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n  Button,\n} from \"@windmill/react-ui\";\nimport { Link } from 'eact-router-dom'\n\nconst UsersTable = ({ resultsPerPage, filter }) => {\n  const [page, setPage] = useState(1);\n  const token = localStorage.getItem('accessToken')\n  const apiBaseUrl = config.url.API_BASE_URL;\n  const [searchParam, setSearchParam] = useState('');\n  const [filteredCustomers, setFilteredCustomers] = useState([]);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [customerToActivate, setCustomerToActivate] = useState(null);\n\n  //...\n\n  const handleActivateUser = (user) => {\n    setCustomerToActivate(user);\n    setShowModal(true);\n  };\n\n  const handleModalClose = () => {\n    setShowModal(false);\n  };\n\n  const handleActivateConfirm = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      await axios.post(`${apiBaseUrl}/api/activate-user/${customerToActivate.id}`, config);\n      fetchData(); // Refresh the data after activation\n    } catch (error) {\n      console.error('Error activating user:', error);\n    }\n    setShowModal(false);\n  };\n\n  return (\n    <>\n      {/*... */}\n      <TableBody>\n        {data.map((user, i) => (\n          <TableRow key={i}>\n            {/*... */}\n            <TableCell>\n              {user.isActive? (\n                <span>Активен</span>\n              ) : (\n                <Button\n                  layout=\"outline\"\n                  className=\"text-gray-50 bg-green-500\"\n                  onClick={() => handleActivateUser(user)}\n                >\n                  Активиране\n                </Button>\n              )}\n            </TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n      {/*... */}\n      <Modal isOpen={showModal} onClose={handleModalClose}>\n        <ModalHeader>Активиране на потребител</ModalHeader>\n        <ModalBody>\n          <p>Сигурни ли сте, че искате да активирате потребителя {customerToActivate && customerToActivate.username}?</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={handleModalClose}>Откажи</Button>\n          <Button onClick={handleActivateConfirm} className=\"bg-green-500 hover:bg-green-700 text-white\">Активиране</Button>\n        </ModalFooter>\n      </Modal>\n    </>\n  );\n};\n\nexport default UsersTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}