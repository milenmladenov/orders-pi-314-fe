{"ast":null,"code":"import axios from 'axios';\nimport { config } from '../../Constants';\nimport { parseJwt } from './Helpers';\nexport const orderApi = {\n  authenticate,\n  signup,\n  numberOfUsers,\n  numberOfOrders,\n  getUsers,\n  deleteUser,\n  getOrders,\n  deleteOrder,\n  createOrder,\n  getUserMe,\n  newOrder\n};\nfunction authenticate(username, password) {\n  return instance.post('/auth/authenticate', {\n    username,\n    password\n  }, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction signup(user) {\n  return instance.post('/auth/signup', user, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction numberOfUsers() {\n  return instance.get('/public/numberOfUsers');\n}\nfunction numberOfOrders() {\n  return instance.get('/public/numberOfOrders');\n}\nfunction getUsers(user, username) {\n  const url = username ? `/api/users/${username}` : '/api/users';\n  return instance.get(url, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction deleteUser(user, username) {\n  return instance.delete(`/api/users/${username}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction newOrder(user) {\n  console.log(user.accessToken);\n  return instance.post(`api/orders/new-order`, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction getOrders(user, text) {\n  const url = text ? `/api/orders?text=${text}` : '/api/orders';\n  return instance.get(url, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction deleteOrder(user, orderId) {\n  return instance.delete(`/api/orders/${orderId}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction createOrder(user, order) {\n  return instance.post('/api/orders', order, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction getUserMe(user) {\n  return instance.get('/api/users/me', {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\n// -- Axios\n\nconst instance = axios.create({\n  baseURL: config.url.API_BASE_URL\n});\ninstance.interceptors.request.use(function (config) {\n  // If token is expired, redirect user to login\n  if (config.headers.Authorization) {\n    const token = config.headers.Authorization.split(' ')[1];\n    const data = parseJwt(token);\n    if (Date.now() > data.exp * 1000) {\n      window.location.href = \"/login\";\n    }\n  }\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n\n// -- Helper functions\n\nfunction bearerAuth(user) {\n  return `Bearer ${user.accessToken}`;\n}","map":{"version":3,"names":["axios","config","parseJwt","orderApi","authenticate","signup","numberOfUsers","numberOfOrders","getUsers","deleteUser","getOrders","deleteOrder","createOrder","getUserMe","newOrder","username","password","instance","post","headers","user","get","url","bearerAuth","delete","console","log","accessToken","text","orderId","order","create","baseURL","API_BASE_URL","interceptors","request","use","Authorization","token","split","data","Date","now","exp","window","location","href","error","Promise","reject"],"sources":["/Users/milen.mladenov/asset-management-fe/src/components/misc/OrderApi.js"],"sourcesContent":["import axios from 'axios'\nimport { config } from '../../Constants'\nimport { parseJwt } from './Helpers'\n\nexport const orderApi = {\n    authenticate,\n    signup,\n    numberOfUsers,\n    numberOfOrders,\n    getUsers,\n    deleteUser,\n    getOrders,\n    deleteOrder,\n    createOrder,\n    getUserMe,\n    newOrder\n}\n\nfunction authenticate(username, password) {\n    return instance.post('/auth/authenticate', { username, password }, {\n        headers: { 'Content-type': 'application/json' }\n    })\n}\n\nfunction signup(user) {\n    return instance.post('/auth/signup', user, {\n        headers: { 'Content-type': 'application/json' }\n    })\n}\n\nfunction numberOfUsers() {\n    return instance.get('/public/numberOfUsers')\n}\n\nfunction numberOfOrders() {\n    return instance.get('/public/numberOfOrders')\n}\n\nfunction getUsers(user, username) {\n    const url = username ? `/api/users/${username}` : '/api/users'\n    return instance.get(url, {\n        headers: { 'Authorization': bearerAuth(user) }\n    })\n}\n\nfunction deleteUser(user, username) {\n    return instance.delete(`/api/users/${username}`, {\n        headers: { 'Authorization': bearerAuth(user) }\n    })\n}\nfunction newOrder(user) {\n    console.log(user.accessToken)\n    return instance.post(`api/orders/new-order`, {\n\n        headers: { 'Content-type': 'application/json', 'Authorization': bearerAuth(user) }\n    })\n}\n\nfunction getOrders(user, text) {\n    const url = text ? `/api/orders?text=${text}` : '/api/orders'\n    return instance.get(url, {\n        headers: { 'Authorization': bearerAuth(user) }\n    })\n}\n\nfunction deleteOrder(user, orderId) {\n    return instance.delete(`/api/orders/${orderId}`, {\n        headers: { 'Authorization': bearerAuth(user) }\n    })\n}\n\nfunction createOrder(user, order) {\n    return instance.post('/api/orders', order, {\n        headers: {\n            'Content-type': 'application/json',\n            'Authorization': bearerAuth(user)\n        }\n    })\n}\n\nfunction getUserMe(user) {\n    return instance.get('/api/users/me', {\n        headers: { 'Authorization': bearerAuth(user) }\n    })\n}\n\n// -- Axios\n\nconst instance = axios.create({\n    baseURL: config.url.API_BASE_URL\n})\n\ninstance.interceptors.request.use(function (config) {\n    // If token is expired, redirect user to login\n    if (config.headers.Authorization) {\n        const token = config.headers.Authorization.split(' ')[1]\n        const data = parseJwt(token)\n        if (Date.now() > data.exp * 1000) {\n            window.location.href = \"/login\"\n        }\n    }\n    return config\n}, function (error) {\n    return Promise.reject(error)\n})\n\n// -- Helper functions\n\nfunction bearerAuth(user) {\n    return `Bearer ${user.accessToken}`\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}