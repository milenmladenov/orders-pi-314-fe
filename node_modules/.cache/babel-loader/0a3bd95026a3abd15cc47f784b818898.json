{"ast":null,"code":"var _jsxFileName = \"/Users/milen.mladenov/asset-management-fe/src/components/OrdersTable.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { TableBody, TableContainer, Table, TableHeader, TableCell, TableRow, TableFooter, Pagination, Button, Select, Modal, ModalHeader, ModalBody, ModalFooter } from \"@windmill/react-ui\";\nimport { EditIcon } from \"../icons\";\nimport { Link } from 'react-router-dom';\nimport { saveAs } from \"file-saver\"; // Import saveAs function\nimport ExcelJS from 'exceljs';\nimport Icon from \"../components/Icon\";\nimport { config } from '../Constants';\nimport ThemedSuspense from \"./ThemedSuspense\";\nimport Fake from \"faker/lib/fake\";\nconst OrdersTable = _ref => {\n  let {\n    resultsPerPage,\n    filter,\n    startDate,\n    endDate\n  } = _ref;\n  const [page, setPage] = useState(1);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken');\n  const loggedUser = JSON.parse(localStorage.getItem('user'));\n  const [selectedStatus, setSelectedStatus] = useState();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedOrderId, setSelectedOrderId] = useState(null); // Define selectedOrderId state\n  const apiBaseUrl = config.url.API_BASE_URL;\n  const [isEditing, setIsEditing] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const getStatusColor = status => {\n    switch (status) {\n      case \"WORKING_ON\":\n        return \"text-yellow-500\";\n      // Yellow color\n      case \"CREATED\":\n        return \"text-gray-500\";\n      case \"SEND\":\n        return \"text-blue-500\";\n      case \"DONE\":\n        return \"text-green-500\";\n        return \"\";\n    }\n  };\n  useEffect(() => {\n    const editingState = {};\n    data.forEach(order => {\n      editingState[order.id] = false;\n    });\n    setIsEditing(editingState);\n  }, [data]);\n  const handleChange = (event, order) => {\n    const newStatus = event.target.value;\n    if (newStatus !== selectedStatus) {\n      setSelectedStatus(newStatus);\n      setSelectedOrderId(order.id);\n      setIsModalOpen(true);\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      const response = await axios.get(`${apiBaseUrl}/api/orders/all?startDate=${startDate}&endDate=${endDate}`, config);\n      console.log(response);\n      const ordersData = response.data;\n      setIsLoading(false);\n\n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"изпратена\") {\n        filteredData = ordersData.filter(order => order.status === \"SEND\");\n      } else if (filter === \"създадена\") {\n        filteredData = ordersData.filter(order => order.status === \"CREATED\");\n      } else if (filter === \"изпълнява се\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      } else if (filter === \"изпълнена\") {\n        filteredData = ordersData.filter(order => order.status === \"DONE\");\n      }\n\n      // Process data in chunks\n      const chunkSize = 2; // adjust the chunk size as needed\n      const flattenedGroups = [];\n      for (let i = 0; i < filteredData.length; i += chunkSize) {\n        const chunk = filteredData.slice(i, i + chunkSize);\n        flattenedGroups.push(...chunk.flatMap(order => order));\n        setData(prevData => [...prevData, ...flattenedGroups]);\n        setTotalResults(flattenedGroups.length);\n        await new Promise(resolve => setTimeout(resolve, 0)); // yield control to the browser\n      }\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  const handleConfirmChange = () => {\n    const order = data.find(order => order.id === selectedOrderId); // Find the order using selectedOrderId\n    if (!order) {\n      console.error(\"Selected order not found\");\n      closeModal();\n      return;\n    }\n\n    // Make API call to change the order status using Axios\n    const url = `${apiBaseUrl}/api/orders/${order.id}/change-status/${selectedStatus}`;\n    axios.post(url, null, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      console.log(url);\n      window.location.reload();\n      // Handle response as needed\n    }).catch(error => {\n      // Handle error\n    });\n    closeModal();\n  };\n  function closeModal() {\n    setIsModalOpen(false);\n    // window.location.reload();\n  }\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n  const formatDateWithoutDashes = dateString => {\n    const date = new Date(dateString);\n    const options = {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit'\n    };\n    return date.toLocaleDateString('en-US', options).replace(/\\//g, ''); // Remove slashes\n  };\n\n  const exportToExcel = async () => {\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Справка');\n    const headerRow = [\"ПОРЕДЕН НОМЕР\", \"Група\", \"ДАТА\", \"ПОРЪЧКА\", \"КЛИЕНТ\", \"ВИД\", \"ГРАД\", \"ЕТИКЕТ\", \"МОДЕЛ\", \"ВИСОЧИНА\", \"ШИРИНА\", \"БРОЙ КОЛИЧЕСТВО\", \"МЕРНА ЕДИНИЦА\", \"ДРЪЖКА\", \"ЕДИНИЧНА ЦЕНА\", \"ЦЕНА НА ДРЪЖКА\", \"ДВУСТРАННО ФОЛИРАНЕ\", \"СТОЙНОСТ\", \"ФОЛИО\", \"ПРОФИЛ\"];\n    worksheet.addRow(headerRow);\n    data.forEach(order => {\n      order.groups.forEach(group => {\n        const rowData = [formatDateWithoutDashes(order.createdAt) + order.id, \"Група\", order.createdAt, order.id, order.user.companyName, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\", order.user.city, order.detailType, group.model.name, group.height, group.width, group.number, \"квадратен метър\", group.handle.name, group.handle.price, \"Цена на Дръжка\", group.bothSidesLaminated ? \"ДВУСТРАННО\" : \"\", order.totalPrice, group.folio.name, group.profil.name];\n        const newRow = worksheet.addRow(rowData);\n\n        // Check if order status is CREATED and set row color to red\n        if (order.status === \"CREATED\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: {\n              argb: 'FF00FF00'\n            } // Green colornpom \n          };\n        } else if (order.status === \"WORKING_ON\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: {\n              argb: 'FFFFFF00'\n            } // Yellow color\n          };\n        }\n      });\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    const blob = new Blob([buffer], {\n      type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n    });\n    saveAs(blob, 'Справка - ' + new Date().toLocaleDateString() + '.xlsx');\n  };\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter, startDate, endDate]);\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ThemedSuspense, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 14\n      }\n    }));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 5\n    }\n  }, loggedUser.data.role === '[ADMIN]' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    layout: \"outline\",\n    onClick: exportToExcel,\n    className: \"btn btn-primary bg-blue-300\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 14\n    }\n  }, \" \\u0415\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 \\u043D\\u0430 \\u0441\\u043F\\u0440\\u0430\\u0432\\u043A\\u0430\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"customeDivider mx-4 my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TableContainer, {\n    className: \"mb-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, \"\\u041D\\u043E\\u043C\\u0435\\u0440\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }, \"O\\u0442 \\u0434\\u0430\\u0442\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 15\n    }\n  }, \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, \"\\u041F\\u043E\\u0442\\u0440\\u0435\\u0431\\u0438\\u0442\\u0435\\u043B\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }, \"\\u041A\\u0440\\u0430\\u0439\\u043D\\u0430 \\u0441\\u0443\\u043C\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }, \"\\u0422\\u0438\\u043F \\u043F\\u043E\\u0440\\u044A\\u0447\\u043A\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 15\n    }\n  }, \"\\u041E\\u0442\\u0441\\u0442\\u044A\\u043F\\u043A\\u0430\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, data.map((order, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: order.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 23\n    }\n  }, formatDateWithoutDashes(order.createdAt) + order.id)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 25\n    }\n  }, order.createdAt)))), /*#__PURE__*/React.createElement(TableCell, {\n    key: order.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isModalOpen,\n    onClose: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: EditIcon,\n    className: \"w-6 h-6 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 25\n    }\n  }), \"\\u041F\\u0440\\u043E\\u043C\\u044F\\u043D\\u0430 \\u043D\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 23\n    }\n  }, \"\\u0421\\u0438\\u0433\\u0443\\u0440\\u043D\\u0438 \\u043B\\u0438 \\u0441\\u0442\\u0435, \\u0447\\u0435 \\u0438\\u0441\\u043A\\u0430\\u0442\\u0435 \\u0434\\u0430 \\u043F\\u0440\\u043E\\u043C\\u0435\\u043D\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\\u0430 \\u043D\\u0430\", \" \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 25\n    }\n  }, \" \", selectedStatus === \"WORKING_ON\" ? \"Изпълнява се\" : selectedStatus === \"CREATED\" ? \"Създадена  \" : selectedStatus === \"SEND\" ? \"Изпратена\" : selectedStatus === \"DONE\" ? \"Изпълнена\" : selectedStatus)), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden sm:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      console.log(order);\n      handleConfirmChange(order);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 27\n    }\n  }, \"\\u041F\\u043E\\u0442\\u0432\\u044A\\u0440\\u0436\\u0434\\u0430\\u0432\\u0430\\u043D\\u0435\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden sm:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    layout: \"outline\",\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 27\n    }\n  }, \"\\u041E\\u0442\\u043A\\u0430\\u0437\")))), loggedUser.data.role === '[ADMIN]' && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setIsEditing(prevState => ({\n      ...prevState,\n      [order.id]: true\n    })),\n    style: {\n      cursor: isEditing[order.id] || order.status === \"DONE\" ? \"default\" : \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 23\n    }\n  }, isEditing[order.id] ? /*#__PURE__*/React.createElement(Select, {\n    value: selectedStatus,\n    onChange: event => handleChange(event, order),\n    onBlur: () => setIsEditing(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 27\n    }\n  }, order.status === \"CREATED\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"                            \", /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 61\n    }\n  }, \"--\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"WORKING_ON\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 33\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u044F\\u0432\\u0430 \\u0441\\u0435\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"SEND\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 81\n    }\n  }, \"\\u0418\\u0437\\u043F\\u0440\\u0430\\u0442\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"DONE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 120\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u0435\\u043D\\u0430\")) : /*#__PURE__*/React.createElement(\"option\", {\n    value: selectedStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 31\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"SEND\" ? \"Изпратена\" : \"Изпълнена\"), order.status == \"WORKING_ON\" && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"SEND\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 33\n    }\n  }, \"\\u0418\\u0437\\u043F\\u0440\\u0430\\u0442\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"DONE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 72\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u0435\\u043D\\u0430\")), order.status == \"SEND\" && /*#__PURE__*/React.createElement(\"option\", {\n    value: \"DONE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 31\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u0435\\u043D\\u0430\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: `flex items-center text-sm ${getStatusColor(order.status)}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 31\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status, \"                      \", order.status !== \"DONE\" && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"blue\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 269\n    }\n  }, \"\\u041F\\u0440\\u043E\\u043C\\u044F\\u043D\\u0430 \\u043D\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"))))), loggedUser.data.role === '[USER]' && /*#__PURE__*/React.createElement(\"div\", {\n    className: `flex items-center text-sm ${getStatusColor(order.status)}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 27\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 25\n    }\n  }, order.user.companyName)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 25\n    }\n  }, order.totalPrice), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 82\n    }\n  }, \"\\u043B\\u0432.\")))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 31\n    }\n  }, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 23\n    }\n  }, \" \", order.type === 'BY_USER' && order.discount !== 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 25\n    }\n  }, order.discount, \"% \"), order.type === 'BY_USER' && order.discount === 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 27\n    }\n  }, \"5% \"), order.type === 'BY_HAND' && order.discount === 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 27\n    }\n  }, order.discount, \"% \"), order.type === 'BY_HAND' && order.discount !== 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 27\n    }\n  }, order.discount, \"% \")))), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"w-1/12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `orders/${order.id}`,\n    className: \"text-indigo-600 hover:text-indigo-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 21\n    }\n  }, \"\\u0414\\u0435\\u0442\\u0430\\u0439\\u043B\\u0438\")), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"w-1/12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 31\n    }\n  }, loggedUser.data.role === '[ADMIN]' || loggedUser.data.role === '[USER]' && order.status === 'CREATED' ? /*#__PURE__*/React.createElement(Link, {\n    to: `orders/edit/${order.id}`,\n    className: \"text-indigo-600 hover:text-indigo-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 23\n    }\n  }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0430\\u043D\\u0435\") : null)))))), /*#__PURE__*/React.createElement(TableFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    totalResults: totalResults,\n    resultsPerPage: resultsPerPage,\n    onChange: onPageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 11\n    }\n  }))));\n};\nexport default OrdersTable;","map":{"version":3,"names":["React","useState","useEffect","axios","TableBody","TableContainer","Table","TableHeader","TableCell","TableRow","TableFooter","Pagination","Button","Select","Modal","ModalHeader","ModalBody","ModalFooter","EditIcon","Link","saveAs","ExcelJS","Icon","config","ThemedSuspense","Fake","OrdersTable","_ref","resultsPerPage","filter","startDate","endDate","page","setPage","data","setData","totalResults","setTotalResults","token","localStorage","getItem","loggedUser","JSON","parse","selectedStatus","setSelectedStatus","isModalOpen","setIsModalOpen","selectedOrderId","setSelectedOrderId","apiBaseUrl","url","API_BASE_URL","isEditing","setIsEditing","isLoading","setIsLoading","getStatusColor","status","editingState","forEach","order","id","handleChange","event","newStatus","target","value","fetchData","headers","Authorization","response","get","console","log","ordersData","filteredData","chunkSize","flattenedGroups","i","length","chunk","slice","push","flatMap","prevData","Promise","resolve","setTimeout","error","handleConfirmChange","find","closeModal","post","then","window","location","reload","catch","onPageChange","p","formatDateWithoutDashes","dateString","date","Date","options","year","month","day","toLocaleDateString","replace","exportToExcel","workbook","Workbook","worksheet","addWorksheet","headerRow","addRow","groups","group","rowData","createdAt","user","companyName","type","city","detailType","model","name","height","width","number","handle","price","bothSidesLaminated","totalPrice","folio","profil","newRow","fill","pattern","fgColor","argb","buffer","xlsx","writeBuffer","blob","Blob","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","role","className","layout","onClick","map","index","key","isOpen","onClose","icon","prevState","style","cursor","onChange","onBlur","color","discount","to"],"sources":["/Users/milen.mladenov/asset-management-fe/src/components/OrdersTable.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  TableBody,\n  TableContainer,\n  Table,\n  TableHeader,\n  TableCell,\n  TableRow,\n  TableFooter,\n  Pagination,\n  Button, Select, Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter\n} from \"@windmill/react-ui\";\nimport {\n  EditIcon,\n\n} from \"../icons\";\nimport { Link } from 'react-router-dom'\nimport { saveAs } from \"file-saver\"; // Import saveAs function\nimport ExcelJS from 'exceljs';\nimport Icon from \"../components/Icon\";\nimport { config } from '../Constants';\nimport ThemedSuspense from \"./ThemedSuspense\";\nimport Fake from \"faker/lib/fake\";\n\n\n\n\n\n\n\n\nconst OrdersTable = ({ resultsPerPage, filter ,startDate,endDate}) => {\n  const [page, setPage] = useState(1);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken')\n  const loggedUser = JSON.parse(localStorage.getItem('user'))\n  const [selectedStatus, setSelectedStatus] = useState();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedOrderId, setSelectedOrderId] = useState(null); // Define selectedOrderId state\n  const apiBaseUrl = config.url.API_BASE_URL;\n  const [isEditing, setIsEditing] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case \"WORKING_ON\":\n        return \"text-yellow-500\"; // Yellow color\n      case \"CREATED\":\n        return \"text-gray-500\";\n      case \"SEND\":\n        return \"text-blue-500\";\n      case \"DONE\":\n        return \"text-green-500\";\n        return \"\";\n    }\n  };\n  useEffect(() => {\n    const editingState = {};\n    data.forEach(order => {\n      editingState[order.id] = false;\n    });\n    setIsEditing(editingState);\n  }, [data]);\n\n\n  const handleChange = (event, order) => {\n    const newStatus = event.target.value;\n    if (newStatus !== selectedStatus) {\n      setSelectedStatus(newStatus);\n      setSelectedOrderId(order.id);\n      setIsModalOpen(true);\n    }\n  };\n\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      const response = await axios.get(`${apiBaseUrl}/api/orders/all?startDate=${startDate}&endDate=${endDate}`, config)\n      console.log(response)\n      const ordersData = response.data;\n      setIsLoading(false);\n  \n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"изпратена\") {\n        filteredData = ordersData.filter(order => order.status === \"SEND\");\n      } else if (filter === \"създадена\") {\n        filteredData = ordersData.filter(order => order.status === \"CREATED\");\n      } else if (filter === \"изпълнява се\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      } else if (filter === \"изпълнена\") {\n        filteredData = ordersData.filter(order => order.status === \"DONE\");\n      }\n  \n      // Process data in chunks\n      const chunkSize = 2; // adjust the chunk size as needed\n      const flattenedGroups = [];\n      for (let i = 0; i < filteredData.length; i += chunkSize) {\n        const chunk = filteredData.slice(i, i + chunkSize);\n        flattenedGroups.push(...chunk.flatMap(order => order));\n        setData((prevData) => [...prevData, ...flattenedGroups]);\n        setTotalResults(flattenedGroups.length);\n        await new Promise(resolve => setTimeout(resolve, 0)); // yield control to the browser\n      }\n  \n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  const handleConfirmChange = () => {\n    const order = data.find(order => order.id === selectedOrderId); // Find the order using selectedOrderId\n    if (!order) {\n      console.error(\"Selected order not found\");\n      closeModal();\n      return;\n    }\n\n    // Make API call to change the order status using Axios\n    const url = `${apiBaseUrl}/api/orders/${order.id}/change-status/${selectedStatus}`;\n    axios\n      .post(url, null, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((response) => {\n        console.log(url);\n        window.location.reload()\n        // Handle response as needed\n      })\n      .catch((error) => {\n        // Handle error\n      });\n\n    closeModal();\n  };\n  function closeModal() {\n    setIsModalOpen(false);\n    // window.location.reload();\n  }\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n\n  const formatDateWithoutDashes = (dateString) => {\n    const date = new Date(dateString);\n    const options = { year: 'numeric', month: '2-digit', day: '2-digit' };\n    return date.toLocaleDateString('en-US', options).replace(/\\//g, ''); // Remove slashes\n  };\n\n\n\n  const exportToExcel = async () => {\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Справка');\n\n    const headerRow = [\n      \"ПОРЕДЕН НОМЕР\", \"Група\", \"ДАТА\", \"ПОРЪЧКА\", \"КЛИЕНТ\", \"ВИД\", \"ГРАД\",\n      \"ЕТИКЕТ\", \"МОДЕЛ\", \"ВИСОЧИНА\", \"ШИРИНА\", \"БРОЙ КОЛИЧЕСТВО\",\n      \"МЕРНА ЕДИНИЦА\", \"ДРЪЖКА\", \"ЕДИНИЧНА ЦЕНА\", \"ЦЕНА НА ДРЪЖКА\",\n      \"ДВУСТРАННО ФОЛИРАНЕ\", \"СТОЙНОСТ\", \"ФОЛИО\", \"ПРОФИЛ\",\n    ];\n\n    worksheet.addRow(headerRow);\n\n    data.forEach(order => {\n\n      order.groups.forEach(group => {\n        const rowData = [\n          formatDateWithoutDashes(order.createdAt) + order.id, \"Група\", order.createdAt, order.id, order.user.companyName, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\",\n          order.user.city, order.detailType, group.model.name, group.height, group.width, group.number,\n          \"квадратен метър\", group.handle.name, group.handle.price, \"Цена на Дръжка\",\n          group.bothSidesLaminated ? \"ДВУСТРАННО\" : \"\", order.totalPrice, group.folio.name, group.profil.name\n        ];\n        const newRow = worksheet.addRow(rowData);\n\n        // Check if order status is CREATED and set row color to red\n        if (order.status === \"CREATED\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: { argb: 'FF00FF00' }, // Green colornpom \n          };\n        } else if (order.status === \"WORKING_ON\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: { argb: 'FFFFFF00' }, // Yellow color\n          };\n        }\n      });\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n\n    saveAs(blob, 'Справка - ' + new Date().toLocaleDateString() + '.xlsx');\n  };\n\n\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter,startDate,endDate]);\n\n  if (isLoading) {\n    return <><ThemedSuspense /></>;\n  }\n\n  return (\n    <div>\n      {loggedUser.data.role === '[ADMIN]' && (\n        <>\n          <div className=\"mt-4 \">\n            <Button layout=\"outline\" onClick={exportToExcel} className=\"btn btn-primary bg-blue-300\">\n             <b> Експорт на справка</b>\n            </Button>\n          </div>\n          <hr className=\"customeDivider mx-4 my-5\" />\n        </>\n      )}\n\n      {/* Table */}\n      <TableContainer className=\"mb-8\">\n        <Table>\n          <TableHeader>\n            <tr>\n              <TableCell>Номер</TableCell>\n              <TableCell>Oт дата</TableCell>\n              <TableCell>Статус</TableCell>\n              <TableCell>Потребител</TableCell>\n              <TableCell>Крайна сума</TableCell>\n              <TableCell>Тип поръчка</TableCell>\n              <TableCell>Отстъпка</TableCell>\n            </tr>\n          </TableHeader>\n          <TableBody>\n\n            {data.map((order, index) => (\n\n              <TableRow key={order.id}>\n                <><TableCell>\n                  <div className=\"flex items-center text-sm\">\n                    <div>\n                      <p className=\"font-semibold\">{formatDateWithoutDashes(order.createdAt) + order.id}</p>\n                    </div>\n                  </div>\n                </TableCell><TableCell>\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <p className=\"font-semibold\">{order.createdAt}</p>\n                      </div>\n                    </div>\n                  </TableCell><TableCell key={order.id}>\n                    <Modal isOpen={isModalOpen} onClose={closeModal}>\n                      <ModalHeader className=\"flex items-center\">\n                        <Icon icon={EditIcon} className=\"w-6 h-6 mr-3\" />\n                        Промяна на статус\n                      </ModalHeader>\n                      <ModalBody>\n                        Сигурни ли сте, че искате да промените статуса на{\" \"}\n                        {/* {selectedStatus && `\"${selectedStatus}\"`} */}\n                        <b> {selectedStatus === \"WORKING_ON\" ? \"Изпълнява се\" : selectedStatus === \"CREATED\" ? \"Създадена  \" : selectedStatus === \"SEND\" ? \"Изпратена\" : selectedStatus === \"DONE\" ? \"Изпълнена\" : selectedStatus}</b>\n\n                      </ModalBody>\n                      <ModalFooter>\n                        <div className=\"hidden sm:block\">\n                          <Button onClick={() => { console.log(order); handleConfirmChange(order); }}>\n                            Потвърждаване\n                          </Button>\n                        </div>\n                        <div className=\"hidden sm:block\">\n                          <Button layout=\"outline\" onClick={closeModal}>\n                            Отказ\n                          </Button>\n                        </div>\n                      </ModalFooter>\n                    </Modal>\n\n                    {loggedUser.data.role === '[ADMIN]' && (\n                      <div onClick={() => setIsEditing(prevState => ({ ...prevState, [order.id]: true }))} style={{ cursor: isEditing[order.id] || order.status === \"DONE\" ? \"default\" : \"pointer\" }}>\n                        {isEditing[order.id] ? (\n                          <Select\n                            value={selectedStatus}\n                            onChange={(event) => handleChange(event, order)}\n                            onBlur={() => setIsEditing(false)}\n                          >\n                            {order.status === \"CREATED\" ? (\n\n                              <>                            <option value=\"\">--</option>\n                                <option value=\"WORKING_ON\">Изпълнява се</option><option value=\"SEND\">Изпратена</option><option value=\"DONE\">Изпълнена</option></>\n\n\n                            ) : (\n                              <option value={selectedStatus}>\n                                {order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"SEND\" ? \"Изпратена\" : \"Изпълнена\"}\n                              </option>\n                            )}\n                            {order.status == \"WORKING_ON\" && (\n                              <><option value=\"SEND\">Изпратена</option><option value=\"DONE\">Изпълнена</option></>)}\n                            {order.status == \"SEND\" && (\n                              <option value=\"DONE\">Изпълнена</option>)}\n\n                          </Select>\n                        ) : (\n                          <div className={`flex items-center text-sm ${getStatusColor(order.status)}`}>\n                            <div>\n                              <p className=\"font-semibold\">\n                                {order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status}                      {order.status !== \"DONE\" && <p style={{ color: \"blue\" }}>Промяна на статус</p>}\n\n                              </p>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                    {loggedUser.data.role === '[USER]' && (\n                      <div className={`flex items-center text-sm ${getStatusColor(order.status)}`}>\n                        <div>\n                          <p className=\"font-semibold\">\n                            {order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена\" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status}</p>\n\n                        </div>\n                      </div>)}\n                  </TableCell><TableCell>\n\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <p className=\"font-semibold\">{order.user.companyName}</p>\n                      </div>\n                    </div>\n                  </TableCell><TableCell>\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <span className=\"font-semibold\">{order.totalPrice}</span><span>лв.</span>\n                      </div>\n                    </div>\n                  </TableCell><TableCell>\n                    {order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\"}\n                  </TableCell><TableCell>\n                    <div className=\"flex items-center text-sm\">\n                      <div> {order.type === 'BY_USER' && order.discount !== 0 && (\n                        <span className=\"font-semibold\">{order.discount}% </span>)}\n\n                        {order.type === 'BY_USER' && order.discount === 0 && (\n                          <span className=\"font-semibold\">5% </span>)}\n                        {order.type === 'BY_HAND' && order.discount === 0 && (\n                          <span className=\"font-semibold\">{order.discount}% </span>)}\n                        {order.type === 'BY_HAND' && order.discount !== 0 && (\n                          <span className=\"font-semibold\">{order.discount}% </span>)}\n                      </div>\n                    </div>\n                  </TableCell><TableCell className=\"w-1/12 text-center\">\n                    <Link\n                      to={`orders/${order.id}`}\n                      className=\"text-indigo-600 hover:text-indigo-900\"\n                    >\n                      Детайли\n                    </Link>\n                  </TableCell><TableCell className=\"w-1/12 text-center\">\n                    {loggedUser.data.role === '[ADMIN]' || (loggedUser.data.role === '[USER]' && order.status === 'CREATED') ? (\n                      <Link to={`orders/edit/${order.id}`} className=\"text-indigo-600 hover:text-indigo-900\">\n                        Редактиране\n                      </Link>\n                    ) : null}\n                  </TableCell></>\n              </TableRow>\n                      ))}\n          </TableBody>\n        </Table>\n        <TableFooter>\n\n          <Pagination\n            totalResults={totalResults}\n            resultsPerPage={resultsPerPage}\n            onChange={onPageChange}\n          />\n        </TableFooter>\n      </TableContainer>\n    </div>\n                    );\n};\n\nexport default OrdersTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}