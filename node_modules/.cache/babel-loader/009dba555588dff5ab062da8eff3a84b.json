{"ast":null,"code":"var _jsxFileName = \"/Users/milenmladenov/asset-management-fe/src/components/OrdersTable.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { TableBody, TableContainer, Table, TableHeader, TableCell, TableRow, TableFooter, Avatar, Badge, Pagination } from \"@windmill/react-ui\";\nconst OrdersTable = _ref => {\n  let {\n    resultsPerPage,\n    filter\n  } = _ref;\n  const [page, setPage] = useState(1);\n  const [ordersData, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken');\n\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      const response = await axios.get(\"http://localhost:8080/api/orders/all\", config);\n      const ordersData = response.data;\n\n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"paid\") {\n        filteredData = ordersData.filter(order => order.status === \"Paid\");\n      } else if (filter === \"un-paid\") {\n        filteredData = ordersData.filter(order => order.status === \"Un-paid\");\n      } else if (filter === \"Изпълнява\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      }\n\n      // Flatten the groups and update the totalResults and data state\n      const flattenedGroups = filteredData.flatMap(order => order.groups);\n      setTotalResults(flattenedGroups.length);\n      setData(flattenedGroups.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    className: \"mb-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, \"id\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"\\u041F\\u043E\\u0442\\u0440\\u0435\\u0431\\u0438\\u0442\\u0435\\u043B\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, data.map((order, i) => (console.log(order), /*#__PURE__*/React.createElement(TableRow, {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }\n  }, order.id)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Badge, {\n    type: order.status === \"Un-paid\" ? \"danger\" : order.status === \"Paid\" ? \"success\" : order.status === \"WORKING_ON\" ? \"warning\" : \"neutral\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява\" : order.status)), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 23\n    }\n  }, order.group)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, order.type === \"BY_HAND\" ? \"Ръчно\" : \"Друго\")))))), /*#__PURE__*/React.createElement(TableFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    totalResults: totalResults,\n    resultsPerPage: resultsPerPage,\n    label: \"Table navigation\",\n    onChange: onPageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }))));\n};\nexport default OrdersTable;","map":{"version":3,"names":["React","useState","useEffect","axios","TableBody","TableContainer","Table","TableHeader","TableCell","TableRow","TableFooter","Avatar","Badge","Pagination","OrdersTable","_ref","resultsPerPage","filter","page","setPage","ordersData","setData","totalResults","setTotalResults","token","localStorage","getItem","onPageChange","p","fetchData","config","headers","Authorization","response","get","data","filteredData","order","status","flattenedGroups","flatMap","groups","length","slice","error","console","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","map","i","log","key","id","type","group","label","onChange"],"sources":["/Users/milenmladenov/asset-management-fe/src/components/OrdersTable.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  TableBody,\n  TableContainer,\n  Table,\n  TableHeader,\n  TableCell,\n  TableRow,\n  TableFooter,\n  Avatar,\n  Badge,\n  Pagination,\n} from \"@windmill/react-ui\";\n\nconst OrdersTable = ({ resultsPerPage, filter }) => {\n  const [page, setPage] = useState(1);\n  const [ordersData, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken')\n\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      const response = await axios.get(\"http://localhost:8080/api/orders/all\", config);\n      const ordersData = response.data;\n\n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"paid\") {\n        filteredData = ordersData.filter(order => order.status === \"Paid\");\n      } else if (filter === \"un-paid\") {\n        filteredData = ordersData.filter(order => order.status === \"Un-paid\");\n      } else if (filter === \"Изпълнява\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      }\n\n      // Flatten the groups and update the totalResults and data state\n      const flattenedGroups = filteredData.flatMap(order => order.groups);\n      setTotalResults(flattenedGroups.length);\n      setData(flattenedGroups.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter]);\n\n  return (\n    <div>\n      {/* Table */}\n      <TableContainer className=\"mb-8\">\n        <Table>\n          <TableHeader>\n            <tr>\n              <TableCell>id</TableCell>\n                <TableCell>Статус</TableCell>\n                <TableCell>Потребител</TableCell>\n\n\n\n\n            </tr>\n          </TableHeader>\n          <TableBody>\n         \n            {data.map((order, i) => (\n              console.log(order),\n              <TableRow key={i}>\n                 <TableCell>\n                  <div className=\"flex items-center text-sm\">\n                    <div>\n                      <p className=\"font-semibold\">{order.id}</p>\n                    </div>\n                  </div>\n                </TableCell>\n                <TableCell>\n                  <Badge\n                    type={\n                      order.status === \"Un-paid\"\n                        ? \"danger\"\n                        : order.status === \"Paid\"\n                        ? \"success\"\n                        : order.status === \"WORKING_ON\"\n                        ? \"warning\"\n                        : \"neutral\"\n                    }\n                  >\n                    {order.status === \"WORKING_ON\" ? \"Изпълнява\" : order.status}\n                  </Badge>\n                </TableCell>\n                <TableCell>\n                \n                  <div className=\"flex items-center text-sm\">\n                    <div>\n                      <p className=\"font-semibold\">{order.group}</p>\n                    </div>\n                  </div>\n                </TableCell>\n                <TableCell>\n                  {order.type === \"BY_HAND\" ? \"Ръчно\" : \"Друго\"}\n                </TableCell>\n                \n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        <TableFooter>\n          <Pagination\n            totalResults={totalResults}\n            resultsPerPage={resultsPerPage}\n            label=\"Table navigation\"\n            onChange={onPageChange}\n          />\n        </TableFooter>\n      </TableContainer>\n    </div>\n  );\n};\n\nexport default OrdersTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}