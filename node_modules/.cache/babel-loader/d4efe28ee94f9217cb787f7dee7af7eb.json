{"ast":null,"code":"var _jsxFileName = \"/Users/milenmladenov/asset-management-fe/src/components/OrdersTable.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { TableBody, TableContainer, Table, TableHeader, TableCell, TableRow, TableFooter, Avatar, Badge, Pagination, Button, Select, Modal, ModalHeader, ModalBody, ModalFooter } from \"@windmill/react-ui\";\nimport { EditIcon, EyeIcon, GridViewIcon, HomeIcon, ListViewIcon, TrashIcon } from \"../icons\";\nimport { Link } from 'react-router-dom';\nimport json2xls from 'json2xls'; // Import json2xls\nimport { saveAs } from \"file-saver\"; // Import saveAs function\nimport * as XLSX from 'xlsx';\nimport ExcelJS from 'exceljs';\nimport Icon from \"../components/Icon\";\nimport { config } from '../Constants';\nconst OrdersTable = _ref => {\n  let {\n    resultsPerPage,\n    filter\n  } = _ref;\n  const [page, setPage] = useState(1);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken');\n  const loggedUser = JSON.parse(localStorage.getItem('user'));\n  const [selectedStatus, setSelectedStatus] = useState(undefined);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedOrderId, setSelectedOrderId] = useState(null); // Define selectedOrderId state\n  const apiBaseUrl = config.url.API_BASE_URL;\n  const handleChange = (event, order) => {\n    const newStatus = event.target.value;\n    order.selectedStatus = newStatus;\n    if (newStatus !== selectedStatus) {\n      setSelectedStatus(newStatus);\n      setIsModalOpen(true);\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      const response = await axios.get(apiBaseUrl + \"/api/orders/all\", config);\n      const ordersData = response.data;\n\n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"изпратена\") {\n        filteredData = ordersData.filter(order => order.status === \"Paid\");\n      } else if (filter === \"създадена\") {\n        filteredData = ordersData.filter(order => order.status === \"CREATED\");\n      } else if (filter === \"изпълнява се\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      } else if (filter === \"изпълнена\") {\n        filteredData = ordersData.filter(order => order.status === \"Paid\");\n      }\n\n      // Flatten the groups and update the totalResults and data state\n      const flattenedGroups = filteredData.flatMap(order => order);\n      setTotalResults(flattenedGroups.length);\n      setData(flattenedGroups.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  const handleConfirmChange = order => {\n    // Make API call to change the order status\n    fetch(apiBaseUrl + `/orders/${order.id}/change-status?orderStatus=${selectedStatus}`, {\n      method: 'POST'\n    }).then(response => {\n      // Handle response as needed\n    }).catch(error => {\n      // Handle error\n    });\n\n    // Close the confirmation modal\n    closeModal();\n  };\n  function closeModal() {\n    setIsModalOpen(false);\n  }\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n  const formatDateWithoutDashes = dateString => {\n    const date = new Date(dateString);\n    const options = {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit'\n    };\n    return date.toLocaleDateString('en-US', options).replace(/\\//g, ''); // Remove slashes\n  };\n\n  const exportToExcel = async () => {\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Справка');\n    const headerRow = [\"ПОРЕДЕН НОМЕР\", \"Група\", \"ДАТА\", \"ПОРЪЧКА\", \"КЛИЕНТ\", \"ВИД\", \"ГРАД\", \"ЕТИКЕТ\", \"МОДЕЛ\", \"ВИСОЧИНА\", \"ШИРИНА\", \"БРОЙ КОЛИЧЕСТВО\", \"МЕРНА ЕДИНИЦА\", \"ДРЪЖКА\", \"ЕДИНИЧНА ЦЕНА\", \"ЦЕНА НА ДРЪЖКА\", \"ДВУСТРАННО ФОЛИРАНЕ\", \"СТОЙНОСТ\", \"ФОЛИО\", \"ПРОФИЛ\"];\n    worksheet.addRow(headerRow);\n    data.forEach(order => {\n      order.groups.forEach(group => {\n        const rowData = [formatDateWithoutDashes(order.createdAt) + order.id, \"Група\", order.createdAt, order.id, order.user.companyName, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\", order.user.city, order.detailType, group.model.name, group.height, group.width, group.number, \"квадратен метър\", group.handle.name, group.handle.price, \"Цена на Дръжка\", group.bothSidesLaminated ? \"ДВУСТРАННО\" : \"\", order.totalPrice, group.folio.name, group.profil.name];\n        const newRow = worksheet.addRow(rowData);\n\n        // Check if order status is CREATED and set row color to red\n        if (order.status === \"CREATED\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: {\n              argb: 'FF00FF00'\n            } // Green colornpom \n          };\n        } else if (order.status === \"WORKING_ON\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: {\n              argb: 'FFFFFF00'\n            } // Yellow color\n          };\n        }\n      });\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    const blob = new Blob([buffer], {\n      type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n    });\n    saveAs(blob, 'Справка - ' + new Date().toLocaleDateString() + '.xlsx');\n  };\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 5\n    }\n  }, loggedUser.data.role === '[ADMIN]' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    layout: \"outline\",\n    onClick: exportToExcel,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, \"\\u0415\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 \\u043D\\u0430 \\u0441\\u043F\\u0440\\u0430\\u0432\\u043A\\u0430\")), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"customeDivider mx-4 my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TableContainer, {\n    className: \"mb-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, \"\\u041D\\u043E\\u043C\\u0435\\u0440\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, \"O\\u0442 \\u0434\\u0430\\u0442\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }, \"\\u041F\\u043E\\u0442\\u0440\\u0435\\u0431\\u0438\\u0442\\u0435\\u043B\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 15\n    }\n  }, \"\\u041A\\u0440\\u0430\\u0439\\u043D\\u0430 \\u0441\\u0443\\u043C\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, \"\\u0422\\u0438\\u043F \\u043F\\u043E\\u0440\\u044A\\u0447\\u043A\\u0430\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, \"\\u041E\\u0442\\u0441\\u0442\\u044A\\u043F\\u043A\\u0430\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, data.map((order, i) => /*#__PURE__*/React.createElement(TableRow, {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, formatDateWithoutDashes(order.createdAt) + order.id)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 25\n    }\n  }, order.createdAt)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isModalOpen,\n    onClose: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: EditIcon,\n    className: \"w-6 h-6 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 25\n    }\n  }), \"\\u041F\\u0440\\u043E\\u043C\\u044F\\u043D\\u0430 \\u043D\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 23\n    }\n  }, \"\\u0421\\u0438\\u0433\\u0443\\u0440\\u043D\\u0438 \\u043B\\u0438 \\u0441\\u0442\\u0435, \\u0447\\u0435 \\u0438\\u0441\\u043A\\u0430\\u0442\\u0435 \\u0434\\u0430 \\u043F\\u0440\\u043E\\u043C\\u0435\\u043D\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\\u0430 \\u043D\\u0430\", \" \", selectedStatus && `\"${selectedStatus}\"`), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden sm:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => handleConfirmChange(order),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 27\n    }\n  }, \"\\u041F\\u043E\\u0442\\u0432\\u044A\\u0440\\u0436\\u0434\\u0430\\u0432\\u0430\\u043D\\u0435\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden sm:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    layout: \"outline\",\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 27\n    }\n  }, \"\\u041E\\u0442\\u043A\\u0430\\u0437\")))), /*#__PURE__*/React.createElement(Select, {\n    value: selectedStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: order.status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 23\n    }\n  }, order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена  \" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status), order.status !== \"CREATED\" && /*#__PURE__*/React.createElement(\"option\", {\n    value: \"CREATED\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 25\n    }\n  }, \"\\u0421\\u044A\\u0437\\u0434\\u0430\\u0434\\u0435\\u043D\\u0430\"), order.status !== \"SEND\" && /*#__PURE__*/React.createElement(\"option\", {\n    value: \"SEND\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 25\n    }\n  }, \"\\u0418\\u0437\\u043F\\u0440\\u0430\\u0442\\u0435\\u043D\\u0430\"), order.status !== \"WORKING_ON\" && /*#__PURE__*/React.createElement(\"option\", {\n    value: \"WORKING_ON\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 25\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u044F\\u0432\\u0430 \\u0441\\u0435\"), order.status !== \"DONE\" && /*#__PURE__*/React.createElement(\"option\", {\n    value: \"DONE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 25\n    }\n  }, \"\\u0418\\u0437\\u043F\\u044A\\u043B\\u043D\\u0435\\u043D\\u0430\"))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 25\n    }\n  }, order.user.companyName)))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 25\n    }\n  }, order.totalPrice), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 82\n    }\n  }, \"\\u043B\\u0432.\")))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 19\n    }\n  }, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 25\n    }\n  }, \"0\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 65\n    }\n  }, \"%\")))), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"w-1/12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `orders/${order.id}`,\n    className: \"text-indigo-600 hover:text-indigo-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 21\n    }\n  }, \"\\u0414\\u0435\\u0442\\u0430\\u0439\\u043B\\u0438\")))))), /*#__PURE__*/React.createElement(TableFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    totalResults: totalResults,\n    resultsPerPage: resultsPerPage,\n    label: \"Table navigation\",\n    onChange: onPageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 11\n    }\n  }))));\n};\nexport default OrdersTable;","map":{"version":3,"names":["React","useState","useEffect","axios","TableBody","TableContainer","Table","TableHeader","TableCell","TableRow","TableFooter","Avatar","Badge","Pagination","Button","Select","Modal","ModalHeader","ModalBody","ModalFooter","EditIcon","EyeIcon","GridViewIcon","HomeIcon","ListViewIcon","TrashIcon","Link","json2xls","saveAs","XLSX","ExcelJS","Icon","config","OrdersTable","_ref","resultsPerPage","filter","page","setPage","data","setData","totalResults","setTotalResults","token","localStorage","getItem","loggedUser","JSON","parse","selectedStatus","setSelectedStatus","undefined","isModalOpen","setIsModalOpen","selectedOrderId","setSelectedOrderId","apiBaseUrl","url","API_BASE_URL","handleChange","event","order","newStatus","target","value","fetchData","headers","Authorization","response","get","ordersData","filteredData","status","flattenedGroups","flatMap","length","slice","error","console","handleConfirmChange","fetch","id","method","then","catch","closeModal","onPageChange","p","formatDateWithoutDashes","dateString","date","Date","options","year","month","day","toLocaleDateString","replace","exportToExcel","workbook","Workbook","worksheet","addWorksheet","headerRow","addRow","forEach","groups","group","rowData","createdAt","user","companyName","type","city","detailType","model","name","height","width","number","handle","price","bothSidesLaminated","totalPrice","folio","profil","newRow","fill","pattern","fgColor","argb","buffer","xlsx","writeBuffer","blob","Blob","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","role","Fragment","className","layout","onClick","map","i","key","isOpen","onClose","icon","to","label","onChange"],"sources":["/Users/milenmladenov/asset-management-fe/src/components/OrdersTable.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  TableBody,\n  TableContainer,\n  Table,\n  TableHeader,\n  TableCell,\n  TableRow,\n  TableFooter,\n  Avatar,\n  Badge,\n  Pagination,\n  Button, Select, Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter\n} from \"@windmill/react-ui\";\nimport {\n  EditIcon,\n  EyeIcon,\n  GridViewIcon,\n  HomeIcon,\n  ListViewIcon,\n  TrashIcon,\n} from \"../icons\";\nimport { Link } from 'react-router-dom'\nimport json2xls from 'json2xls'; // Import json2xls\nimport { saveAs } from \"file-saver\"; // Import saveAs function\nimport * as XLSX from 'xlsx';\nimport ExcelJS from 'exceljs';\nimport Icon from \"../components/Icon\";\nimport { config } from '../Constants';\n\n\n\n\n\n\n\nconst OrdersTable = ({ resultsPerPage, filter }) => {\n  const [page, setPage] = useState(1);\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const token = localStorage.getItem('accessToken')\n  const loggedUser = JSON.parse(localStorage.getItem('user'))\n  const [selectedStatus, setSelectedStatus] = useState(undefined);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedOrderId, setSelectedOrderId] = useState(null); // Define selectedOrderId state\n  const apiBaseUrl = config.url.API_BASE_URL;\n\n\n\n  const handleChange = (event,order) => {\n    const newStatus = event.target.value;\n    order.selectedStatus = newStatus;\n    if (newStatus !== selectedStatus) {\n      setSelectedStatus(newStatus);\n      setIsModalOpen(true);\n    }\n  };\n\n  const fetchData = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      const response = await axios.get(apiBaseUrl + \"/api/orders/all\", config);\n      const ordersData = response.data;\n\n      // Apply filters if necessary\n      let filteredData = ordersData;\n      if (filter === \"изпратена\") {\n        filteredData = ordersData.filter(order => order.status === \"Paid\");\n      } else if (filter === \"създадена\") {\n        filteredData = ordersData.filter(order => order.status === \"CREATED\");\n      } else if (filter === \"изпълнява се\") {\n        filteredData = ordersData.filter(order => order.status === \"WORKING_ON\");\n      } else if (filter === \"изпълнена\") {\n        filteredData = ordersData.filter(order => order.status === \"Paid\");\n      }\n\n      // Flatten the groups and update the totalResults and data state\n      const flattenedGroups = filteredData.flatMap(order => order);\n      setTotalResults(flattenedGroups.length);\n      setData(flattenedGroups.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  const handleConfirmChange = (order) => {\n    // Make API call to change the order status\n    fetch(apiBaseUrl + `/orders/${order.id}/change-status?orderStatus=${selectedStatus}`, {\n      method: 'POST',\n    })\n      .then((response) => {\n        // Handle response as needed\n      })\n      .catch((error) => {\n        // Handle error\n      });\n\n    // Close the confirmation modal\n    closeModal()\n  };\n  function closeModal() {\n    setIsModalOpen(false);\n  }\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n\n  const formatDateWithoutDashes = (dateString) => {\n    const date = new Date(dateString);\n    const options = { year: 'numeric', month: '2-digit', day: '2-digit' };\n    return date.toLocaleDateString('en-US', options).replace(/\\//g, ''); // Remove slashes\n  };\n\n\n\n  const exportToExcel = async () => {\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Справка');\n\n    const headerRow = [\n      \"ПОРЕДЕН НОМЕР\", \"Група\", \"ДАТА\", \"ПОРЪЧКА\", \"КЛИЕНТ\", \"ВИД\", \"ГРАД\",\n      \"ЕТИКЕТ\", \"МОДЕЛ\", \"ВИСОЧИНА\", \"ШИРИНА\", \"БРОЙ КОЛИЧЕСТВО\",\n      \"МЕРНА ЕДИНИЦА\", \"ДРЪЖКА\", \"ЕДИНИЧНА ЦЕНА\", \"ЦЕНА НА ДРЪЖКА\",\n      \"ДВУСТРАННО ФОЛИРАНЕ\", \"СТОЙНОСТ\", \"ФОЛИО\", \"ПРОФИЛ\",\n    ];\n\n    worksheet.addRow(headerRow);\n\n    data.forEach(order => {\n      order.groups.forEach(group => {\n        const rowData = [\n          formatDateWithoutDashes(order.createdAt) + order.id, \"Група\", order.createdAt, order.id, order.user.companyName, order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\",\n          order.user.city, order.detailType, group.model.name, group.height, group.width, group.number,\n          \"квадратен метър\", group.handle.name, group.handle.price, \"Цена на Дръжка\",\n          group.bothSidesLaminated ? \"ДВУСТРАННО\" : \"\", order.totalPrice, group.folio.name, group.profil.name\n        ];\n        const newRow = worksheet.addRow(rowData);\n\n        // Check if order status is CREATED and set row color to red\n        if (order.status === \"CREATED\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: { argb: 'FF00FF00' }, // Green colornpom \n          };\n        } else if (order.status === \"WORKING_ON\") {\n          newRow.fill = {\n            type: 'pattern',\n            pattern: 'solid',\n            fgColor: { argb: 'FFFFFF00' }, // Yellow color\n          };\n        }\n      });\n    });\n\n    const buffer = await workbook.xlsx.writeBuffer();\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n\n    saveAs(blob, 'Справка - ' + new Date().toLocaleDateString() + '.xlsx');\n  };\n\n\n  useEffect(() => {\n    fetchData();\n  }, [page, resultsPerPage, filter]);\n  return (\n    <div>\n      {loggedUser.data.role === '[ADMIN]' && (\n        <>\n          <div className=\"mt-4 \">\n            <Button layout=\"outline\" onClick={exportToExcel} className=\"btn btn-primary\">\n              Експорт на справка\n            </Button>\n          </div>\n          <hr className=\"customeDivider mx-4 my-5\" />\n        </>\n      )}\n      \n      {/* Table */}\n      <TableContainer className=\"mb-8\">\n        <Table>\n          <TableHeader>\n            <tr>\n              <TableCell>Номер</TableCell>\n              <TableCell>Oт дата</TableCell>\n              <TableCell>Статус</TableCell>\n              <TableCell>Потребител</TableCell>\n              <TableCell>Крайна сума</TableCell>\n              <TableCell>Тип поръчка</TableCell>\n              <TableCell>Отстъпка</TableCell>\n            </tr>\n          </TableHeader>\n          <TableBody>\n          \n            {data.map((order, i) => (\n             <TableRow key={i}>\n                  <TableCell>\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <p className=\"font-semibold\">{formatDateWithoutDashes(order.createdAt) + order.id}</p>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <p className=\"font-semibold\">{order.createdAt}</p>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <Modal isOpen={isModalOpen} onClose={closeModal}>\n                      <ModalHeader className=\"flex items-center\">\n                        <Icon icon={EditIcon} className=\"w-6 h-6 mr-3\" />\n                        Промяна на статус\n                      </ModalHeader>\n                      <ModalBody>\n                        Сигурни ли сте, че искате да промените статуса на{\" \"}\n                        {selectedStatus && `\"${selectedStatus}\"`}\n                      </ModalBody>\n                      <ModalFooter>\n                        <div className=\"hidden sm:block\">\n                          <Button onClick={() => handleConfirmChange(order)}>\n                            Потвърждаване\n                          </Button>\n                        </div>\n                        <div className=\"hidden sm:block\">\n                          <Button layout=\"outline\" onClick={closeModal}>\n                            Отказ\n                          </Button>\n                        </div>\n                      </ModalFooter>\n                    </Modal>\n                  \n                    <Select value={selectedStatus}  >\n                      <option value={order.status}>\n                        {order.status === \"WORKING_ON\" ? \"Изпълнява се\" : order.status === \"CREATED\" ? \"Създадена  \" : order.status === \"SEND\" ? \"Изпратена\" : order.status === \"DONE\" ? \"Изпълнена\" : order.status}\n                      </option>\n                      {order.status !== \"CREATED\" && (\n                        <option value=\"CREATED\">Създадена</option>\n                      )}\n                      {order.status !== \"SEND\" && (\n                        <option value=\"SEND\">Изпратена</option>\n                      )}\n                      {order.status !== \"WORKING_ON\" && (\n                        <option value=\"WORKING_ON\">Изпълнява се</option>\n                      )}\n                      {order.status !== \"DONE\" && (\n                        <option value=\"DONE\">Изпълнена</option>\n                      )}\n\n\n                    </Select>\n\n                  </TableCell>\n                  <TableCell>\n\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <p className=\"font-semibold\">{order.user.companyName}</p>\n                      </div>\n                    </div>\n                  </TableCell>\n\n                  <TableCell>\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <span className=\"font-semibold\">{order.totalPrice}</span><span>лв.</span>\n                      </div>\n                    </div>\n                  </TableCell>\n\n\n                  <TableCell>\n                    {order.type === \"BY_HAND\" ? \"Ръчно - от Администратор\" : \"От клиент\"}\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center text-sm\">\n                      <div>\n                        <span className=\"font-semibold\">0</span><span>%</span>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"w-1/12 text-center\">\n                    <Link\n                      to={`orders/${order.id}`}\n                      className=\"text-indigo-600 hover:text-indigo-900\"\n                    >\n                      Детайли\n                    </Link>\n                  </TableCell>\n                </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        <TableFooter>\n\n          <Pagination\n            totalResults={totalResults}\n            resultsPerPage={resultsPerPage}\n            label=\"Table navigation\"\n            onChange={onPageChange}\n          />\n        </TableFooter>\n      </TableContainer>\n    </div>\n  );\n};\n\nexport default OrdersTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}